/*! 
 * jQuery Bootgrid v1.0.0-beta2 - 07/25/2014
 * Copyright (c) 2014 Rafael Staib (http://www.jquery-bootgrid.com)
 * Licensed under MIT http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";function c(a){function b(b){return c.identifier&&b[c.identifier]===a[c.identifier]}var c=this;this.rows.contains(b)||this.rows.push(a)}function d(b){return b?a.extend({},this.cachedParams,{ctx:b}):this.cachedParams}function e(){var b={current:this.current,rowCount:this.rowCount,sort:this.sort,searchPhrase:this.searchPhrase},c=this.options.post;return c=a.isFunction(c)?c():c,a.extend(!0,b,c)}function f(b){return"."+a.trim(b).replace(/\s+/gm,".")}function g(){var b=this.options.url;return a.isFunction(b)?b():b}function h(){this.element.trigger("initialize"+A),j.call(this),l.call(this),m.call(this),w.call(this),v.call(this),n.call(this),k.call(this),this.element.trigger("initialized"+A)}function i(a){return a.visible}function j(){var b=this,c=this.element.find("thead > tr").first(),d=!1;c.children().each(function(){var c=a(this),e=c.data(),f={id:e.columnId,identifier:null==b.identifier&&e.identifier||!1,type:b.options.converters[e.type]&&e.type||"string",text:c.text(),formatter:b.options.formatters[e.formatter]||null,order:d||"asc"!==e.order&&"desc"!==e.order?null:e.order,sortable:!(e.sortable===!1),visible:!(e.visible===!1)};b.columns.push(f),null!=f.order&&(b.sort[f.id]=f.order),f.identifier&&(b.identifier=f.id),b.options.multiSort||null===f.order||(d=!0)})}function k(){function b(a){for(var b,c=0;c<d.columns.length;c++)if(b=d.columns[c],b.visible&&d.options.converters[b.type].to(a[b.id]).indexOf(d.searchPhrase)>-1)return!0;return!1}function c(a,b){d.total=b,d.totalPages=Math.ceil(b/d.rowCount),u.call(d,a),p.call(d),r.call(d),d.element.trigger("loaded"+A)}var d=this,f=e.call(this),h=g.call(this);if(null==h||"string"!=typeof h||0===h.length)throw new Error("Url setting must be a none empty string or a function that returns one.");if(this.element.trigger("load"+A),y.call(this),this.options.ajax)a.post(h,f,function(b){"string"==typeof b&&(b=a.parseJSON(b)),d.rows=b.rows,d.current=b.current,c(d.rows,b.total)}).fail(function(){q.call(d),d.element.trigger("loaded"+A)});else{var i=this.searchPhrase.length>0?this.rows.where(b):this.rows,j=i.length;-1!==this.rowCount&&(i=i.page(this.current,this.rowCount)),c(i,j)}}function l(){if(!this.options.ajax){var b=this,d=this.element.find("tbody > tr");d.each(function(){var d=a(this),e=d.children("td"),f={};a.each(b.columns,function(a,c){f[c.id]=b.options.converters[c.type].from(e.eq(a).text())}),c.call(b,f)}),this.total=this.rows.length,this.totalPages=-1===this.rowCount?1:Math.ceil(this.total/this.rowCount),z.call(this)}}function m(){var b=this.options.templates;this.element.addClass(this.options.css.table),0===this.element.children("tbody").length&&this.element.append(b.body),1&this.options.navigation&&(this.header=a(b.header.resolve(d.call(this,{id:this.element._bgId()+"-header"}))),this.element.before(this.header)),2&this.options.navigation&&(this.footer=a(b.footer.resolve(d.call(this,{id:this.element._bgId()+"-footer"}))),this.element.after(this.footer))}function n(){if(0!==this.options.navigation){var b=this.options.css,c=f(b.actions),e=this.header.find(c),g=this.footer.find(c);if(e.length+g.length>0){var h=this,i=this.options.templates,j=a(i.actions.resolve(d.call(this)));if(this.options.ajax){var l=i.icon.resolve(d.call(this,{iconCss:b.iconRefresh})),m=a(i.actionButton.resolve(d.call(this,{content:l,text:this.options.labels.refresh}))).on("click"+A,function(a){a.stopPropagation(),h.current=1,k.call(h)});j.append(m)}t.call(this,j),o.call(this,j),x.call(this,e,j,1),x.call(this,g,j,2)}}}function o(b){var c=this,e=this.options.css,g=this.options.templates,h=g.icon.resolve(d.call(this,{iconCss:e.iconColumns})),i=a(g.actionDropDown.resolve(d.call(this,{content:h}))),j=f(e.dropDownItemCheckbox);a.each(this.columns,function(b,h){var l=a(g.actionDropDownCheckboxItem.resolve(d.call(c,{name:h.id,label:h.text,checked:h.visible}))).on("click"+A,j,function(b){b.stopPropagation(),h.visible=a(this).find("input").prop("checked"),c.element.find("tbody").empty(),w.call(c),k.call(c)});i.find(f(e.dropDownMenuItems)).append(l)}),b.append(i)}function p(){if(0!==this.options.navigation){var b=f(this.options.css.infos),c=this.header.find(b),e=this.footer.find(b);if(c.length+e.length>0){var g=this.current*this.rowCount,h=a(this.options.templates.infos.resolve(d.call(this,{end:0===this.total||-1===g||g>this.total?this.total:g,start:0===this.total?0:g-this.rowCount+1,total:this.total})));x.call(this,c,h,1),x.call(this,e,h,2)}}}function q(){var a=this.element.children("tbody").first(),b=this.options.templates;a.html(b.noResults.resolve(d.call(this,{columns:this.columns.where(i).length})))}function r(){if(0!==this.options.navigation){var b=f(this.options.css.pagination),c=this.header.find(b)._bgShowAria(-1!==this.rowCount),e=this.footer.find(b)._bgShowAria(-1!==this.rowCount);if(-1!==this.rowCount&&c.length+e.length>0){var g=this.options.templates,h=this.current,i=this.totalPages,j=a(g.pagination.resolve(d.call(this))),k=i-h,l=-1*(this.options.padding-h),m=k>=this.options.padding?Math.max(l,1):Math.max(l-this.options.padding+k,1),n=2*this.options.padding+1,o=i>=n?n:i;s.call(this,j,"first","&laquo;","first")._bgEnableAria(h>1),s.call(this,j,"prev","&lt;","prev")._bgEnableAria(h>1);for(var p=0;o>p;p++){var q=p+m;s.call(this,j,q,q,"page-"+q)._bgEnableAria()._bgSelectAria(q===h)}0===o&&s.call(this,j,1,1,"page-1")._bgEnableAria(!1)._bgSelectAria(),s.call(this,j,"next","&gt;","next")._bgEnableAria(i>h),s.call(this,j,"last","&raquo;","last")._bgEnableAria(i>h),x.call(this,c,j,1),x.call(this,e,j,2)}}}function s(b,c,e,g){var h=this,i=this.options.templates,j=this.options.css,l=d.call(this,{css:g,text:e,uri:"#"+c}),m=a(i.paginationItem.resolve(l)).addClass(j).on("click"+A,f(j.paginationButton),function(b){b.stopPropagation();var c=a(this),d=c.parent();if(!d.hasClass("active")&&!d.hasClass("disabled")){var e={first:1,prev:h.current-1,next:h.current+1,last:h.totalPages},f=c.attr("href").substr(1);h.current=e[f]||+f,k.call(h)}c.trigger("blur")});return b.append(m),m}function t(b){function c(a){return-1===a?e.options.labels.all:a}var e=this,g=this.options.rowCount;if(a.isArray(g)){var h=this.options.css,i=this.options.templates,j=a(i.actionDropDown.resolve(d.call(this,{content:this.rowCount}))),l=f(h.dropDownMenu),m=f(h.dropDownMenuText),n=f(h.dropDownMenuItems),o=f(h.dropDownItemButton);a.each(g,function(b,f){var g=a(i.actionDropDownItem.resolve(d.call(e,{text:c(f),uri:"#"+f})))._bgSelectAria(f===e.rowCount).on("click"+A,o,function(b){b.preventDefault();var d=a(this),f=+d.attr("href").substr(1);f!==e.rowCount&&(e.current=1,e.rowCount=f,d.parents(n).children().each(function(){var b=a(this),c=+b.find(o).attr("href").substr(1);b._bgSelectAria(c===f)}),d.parents(l).find(m).text(c(f)),k.call(e))});j.find(n).append(g)}),b.append(j)}}function u(b){if(b.length>0){var c=this,e=this.options.templates,f=this.element.children("tbody").first(),g="",h="";a.each(b,function(b,f){h="",a.each(c.columns,function(b,g){if(g.visible){var i=a.isFunction(g.formatter)?g.formatter.call(c,g,f):c.options.converters[g.type].to(f[g.id]);h+=e.cell.resolve(d.call(c,{content:null==i||""===i?"&nbsp;":i}))}}),g+=e.row.resolve(d.call(c,{cells:h}))}),f.html(g)}else q.call(this)}function v(){if(0!==this.options.navigation){var c=this.options.css,e=f(c.search),g=this.header.find(e),h=this.footer.find(e);if(g.length+h.length>0){var i=this,j=this.options.templates,k=null,l="",m=f(c.searchField),n=a(j.search.resolve(d.call(this))),o=n.is(m)?n:n.find(m);o.on("keyup"+A,function(c){c.stopPropagation();var d=a(this).val();l!==d&&(l=d,b.clearTimeout(k),k=b.setTimeout(function(){i.search(d)},250))}),x.call(this,g,n,1),x.call(this,h,n,2)}}}function w(){var b=this,c=this.element.find("thead > tr"),e=this.options.css,g=this.options.templates,h="",i=this.options.sorting;a.each(this.columns,function(a,c){if(c.visible){var f=b.sort[c.id],j=i&&f&&"asc"===f?e.iconUp:i&&f&&"desc"===f?e.iconDown:"",k=g.icon.resolve(d.call(b,{iconCss:j}));h+=g.headerCell.resolve(d.call(b,{column:c,icon:k,sortable:i&&c.sortable&&e.sortable||""}))}}),c.html(h),i&&c.off("click"+A).on("click"+A,f(e.sortable),function(c){c.preventDefault();var d=a(this),g=d.data("column-id")||d.parents("th").first().data("column-id"),h=b.sort[g],i=d.find(f(e.icon));b.options.multiSort||(d.parents("tr").first().find(f(e.icon)).removeClass(e.iconDown+" "+e.iconUp),b.sort={}),h&&"asc"===h?(b.sort[g]="desc",i.removeClass(e.iconUp).addClass(e.iconDown)):h&&"desc"===h?b.options.multiSort?(delete b.sort[g],i.removeClass(e.iconDown)):(b.sort[g]="asc",i.removeClass(e.iconDown).addClass(e.iconUp)):(b.sort[g]="asc",i.addClass(e.iconUp)),z.call(b),k.call(b)})}function x(b,c,d){this.options.navigation&d&&b.each(function(b,d){a(d).before(c.clone(!0)).remove()})}function y(){var a=this.options.templates,b=this.element.children("thead").first(),c=this.element.children("tbody").first(),e=c.find("tr > td").first(),f=this.element.height()-b.height()-(e.height()+20);c.html(a.loading.resolve(d.call(this,{columns:this.columns.where(i).length}))),-1!==this.rowCount&&f>0&&c.find("tr > td").css("padding","20px 0 "+f+"px")}function z(){function a(c,d,e){function f(a){return"asc"===h.order?a:-1*a}e=e||0;var g=e+1,h=b[e];return c[h.id]>d[h.id]?f(1):c[h.id]<d[h.id]?f(-1):b.length>g?a(g):0}var b=[];if(!this.options.ajax){for(var c in this.sort)(this.options.multiSort||0===b.length)&&b.push({id:c,order:this.sort[c]});b.length>0&&this.rows.sort(a)}}var A=".rs.jquery.bootgrid",B=function(b,c){this.element=a(b),this.options=a.extend(!0,{},B.defaults,this.element.data(),c);var d=this.options.rowCount=this.element.data().rowCount||c.rowCount||this.options.rowCount;this.columns=[],this.identifier=null,this.current=1,this.rows=[],this.rowCount=a.isArray(d)?d[0]:d,this.sort={},this.searchPhrase="",this.total=0,this.totalPages=0,this.cachedParams={lbl:this.options.labels,css:this.options.css,ctx:{}},this.header=null,this.footer=null};B.defaults={navigation:3,padding:2,rowCount:[10,25,50,-1],selection:!1,multiSelect:!1,selectRows:!1,sorting:!0,multiSort:!1,ajax:!1,post:{},url:"",converters:{numeric:{from:function(a){return+a},to:function(a){return a+""}},string:{from:function(a){return a},to:function(a){return a}}},css:{actions:"actions btn-group",columnHeaderAnchor:"column-header-anchor",columnHeaderText:"text",dropDownItemButton:"dropdown-item-button",dropDownItemCheckbox:"dropdown-item-checkbox",dropDownMenu:"dropdown btn-group",dropDownMenuItems:"dropdown-menu pull-right",dropDownMenuText:"dropdown-text",footer:"bootgrid-footer container-fluid",header:"bootgrid-header container-fluid",icon:"icon glyphicon",iconColumns:"glyphicon-th-list",iconDown:"glyphicon-chevron-down",iconRefresh:"glyphicon-refresh",iconUp:"glyphicon-chevron-up",infos:"infos",pagination:"pagination",paginationButton:"button",search:"search form-group",searchField:"searchField form-control",sortable:"sortable",table:"bootgrid-table table"},formatters:{},labels:{all:"All",infos:"Showing {{ctx.start}} to {{ctx.end}} of {{ctx.total}} entries",loading:"Loading...",noResults:"No results found!",refresh:"Refresh",search:"Search"},templates:{actionButton:'<button class="btn btn-default" type="button" title="{{ctx.text}}">{{ctx.content}}</button>',actionDropDown:'<div class="{{css.dropDownMenu}}"><button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"><span class="{{css.dropDownMenuText}}">{{ctx.content}}</span> <span class="caret"></span></button><ul class="{{css.dropDownMenuItems}}" role="menu"></ul></div>',actionDropDownItem:'<li><a href="{{ctx.uri}}" class="{{css.dropDownItemButton}}">{{ctx.text}}</a></li>',actionDropDownCheckboxItem:'<li><label class="{{css.dropDownItemCheckbox}}"><input name="{{ctx.name}}" type="checkbox" value="1" {{ctx.checked}} /> {{ctx.label}}</label></li>',actions:'<div class="{{css.actions}}"></div>',body:"<tbody></tbody>",cell:"<td>{{ctx.content}}</td>",footer:'<div id="{{ctx.id}}" class="{{css.footer}}"><div class="row"><div class="col-sm-6"><p class="{{css.pagination}}"></p></div><div class="col-sm-6 infoBar"><p class="{{css.infos}}"></p></div></div></div>',header:'<div id="{{ctx.id}}" class="{{css.header}}"><div class="row"><div class="col-sm-12 actionBar"><p class="{{css.search}}"></p><p class="{{css.actions}}"></p></div></div></div>',headerCell:'<th data-column-id="{{ctx.column.id}}"><a href="javascript:void(0);" class="{{css.columnHeaderAnchor}} {{ctx.sortable}}"><span class="{{css.columnHeaderText}}">{{ctx.column.text}}</span>{{ctx.icon}}</a></th>',icon:'<span class="{{css.icon}} {{ctx.iconCss}}"></span>',infos:'<div class="{{css.infos}}">{{lbl.infos}}</div>',loading:'<tr><td colspan="{{ctx.columns}}" class="loading">{{lbl.loading}}</td></tr>',noResults:'<tr><td colspan="{{ctx.columns}}" class="no-results">{{lbl.noResults}}</td></tr>',pagination:'<ul class="{{css.pagination}}"></ul>',paginationItem:'<li class="{{ctx.css}}"><a href="{{ctx.uri}}" class="{{css.paginationButton}}">{{ctx.text}}</a></li>',row:"<tr>{{ctx.cells}}</tr>",search:'<div class="{{css.search}}"><div class="input-group"><span class="{{css.icon}} input-group-addon glyphicon-search"></span> <input type="text" class="{{css.searchField}}" placeholder="{{lbl.search}}" /></div></div>'}},B.prototype.append=function(a){if(!this.options.ajax){for(var b=0;b<a.length;b++)c.call(this,a[b]);z.call(this),k.call(this)}return this},B.prototype.clear=function(){return this.options.ajax||(this.rows=[],this.current=1,this.total=0,k.call(this)),this},B.prototype.destroy=function(){return a(b).off(A),1&this.options.navigation&&this.header.remove(),2&this.options.navigation&&this.footer.remove(),this.element.remove("tbody").off(A).removeData(A),this},B.prototype.reload=function(){return this.current=1,k.call(this),this},B.prototype.remove=function(){return!this.options.ajax,this},B.prototype.search=function(a){return this.searchPhrase=a,k.call(this),this},B.prototype.select=function(){return this},B.prototype.sort=function(b){var c=b?a.extend({},b):{};return c===this.sort?this:(this.sort=c,w.call(this),z.call(this),k.call(this),this)};var C=a.fn.bootgrid;if(a.fn.bootgrid=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),e=d.data(A),f="object"==typeof b&&b;if(e||"destroy"!==b)return e||(d.data(A,e=new B(this,f)),h.call(e)),"string"==typeof b?e[b].apply(e,c):void 0})},a.fn.bootgrid.Constructor=B,a.fn.bootgrid.noConflict=function(){return a.fn.bootgrid=C,this},a.fn.extend({_bgAria:function(a,b){return this.attr("aria-"+a,b)},_bgRemoveAria:function(a){return this.removeAttr("aria-"+a)},_bgEnableAria:function(a){return null==a||a?this.removeClass("disabled")._bgAria("disabled","false"):this.addClass("disabled")._bgAria("disabled","true")},_bgShowAria:function(a){return null==a||a?this.show()._bgAria("hidden","false"):this.hide()._bgAria("hidden","true")},_bgSelectAria:function(a){return null==a||a?this.addClass("active")._bgAria("selected","true"):this.removeClass("active")._bgAria("selected","false")},_bgId:function(a){return a?this.attr("id",a):this.attr("id")}}),!String.prototype.resolve){var D={checked:function(a){return"boolean"==typeof a?a?'checked="checked"':"":a}};String.prototype.resolve=function(b,c){var d=this;return a.each(b,function(b,e){if(null!=e&&"function"!=typeof e)if("object"==typeof e){var f=c?a.extend([],c):[];f.push(b),d=d.resolve(e,f)}else{a.isFunction(D[b])&&(e=D[b](e)),b=c?c.join(".")+"."+b:b;var g=new RegExp("\\{\\{"+b+"\\}\\}","gm");d=d.replace(g,e)}}),d}}Array.prototype.contains||(Array.prototype.contains=function(a){for(var b=0;b<this.length;b++){var c=this[b];if(a(c))return!0}return!1}),Array.prototype.page||(Array.prototype.page=function(a,b){var c=(a-1)*b,d=c+b;return this.length>c?this.length>d?this.slice(c,d):this.slice(c):[]}),Array.prototype.where||(Array.prototype.where=function(a){for(var b=[],c=0;c<this.length;c++){var d=this[c];a(d)&&b.push(d)}return b})}(jQuery,window);