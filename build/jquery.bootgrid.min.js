/*! 
 * jQuery Bootgrid v1.0.0-beta - 07/23/2014
 * Copyright (c) 2014 Rafael Staib (http://www.jquery-bootgrid.com)
 * Licensed under MIT http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";function c(b){var c={tpl:this.options.templates,lbl:this.options.labels,css:this.options.css,ctx:{}};return a.extend({},c,{ctx:b||{}})}function d(){var b={current:this.current,rowCount:this.rowCount,sort:this.sort},c=this.options.post;return c=a.isFunction(c)?c():c,a.extend(!0,b,c)}function e(b){return"."+a.trim(b).replace(/\s+/gm,".")}function f(){var b=this.options.url;return a.isFunction(b)?b():b}function g(){this.element.trigger("initialize"+w),i.call(this),k.call(this),t.call(this),l.call(this),j.call(this),this.element.trigger("initialized"+w)}function h(a){return a.visible}function i(){var b=this,c=this.element.find("thead > tr").first(),d=!1;c.children().each(function(){var c=a(this),e=c.data("order"),f=c.data("sortable"),g=c.data("visible"),h={id:c.data("column-id"),text:c.text(),formatter:b.options.formatters[c.data("formatter")],order:d||"asc"!==e&&"desc"!==e?null:e,sortable:!(f===!1||0===f),visible:!(g===!1||0===g)};b.columns.push(h),null!=h.order&&(b.sort[h.id]=h.order),b.options.multiSort||null===h.order||(d=!0)})}function j(){var b=this,c=d.call(this),e=f.call(this);if(null==e||"string"!=typeof e||0===e.length)throw new Error("Url setting must be a none empty string or a function that returns one.");this.element.trigger("load"+w),v.call(this),a.post(e,c,function(c){"string"==typeof c&&(c=a.parseJSON(c)),b.rows=c.rows,b.current=c.current,b.total=c.total,b.totalPages=Math.ceil(b.total/b.rowCount),s.call(b),n.call(b),p.call(b),b.element.trigger("loaded"+w)}).fail(function(){o.call(b)})}function k(){var b=this.options.templates;this.element.addClass(this.options.css.table),0===this.element.children("tbody").length&&this.element.append(b.body),1&this.options.navigation&&(this.header=a(b.header.resolve(c.call(this,{id:this.element._bgId()+"-header"}))),this.element.before(this.header)),2&this.options.navigation&&(this.footer=a(b.footer.resolve(c.call(this,{id:this.element._bgId()+"-footer"}))),this.element.after(this.footer))}function l(){if(0!==this.options.navigation){var b=this.options.css,d=e(b.actions),f=this.header.find(d),g=this.footer.find(d);if(f.length+g.length>0){var h=this,i=this.options.templates,k=a(i.actionButton.resolve(c.call(this,{iconCss:b.iconRefresh,text:this.options.labels.refresh}))).on("click"+w,function(a){a.stopPropagation(),h.current=1,j.call(h)}),l=a(i.actions.resolve(c.call(this))).append(k);r.call(this,l),m.call(this,l),u.call(this,f,l,1),u.call(this,g,l,2)}}}function m(b){var d=this,f=this.options.css,g=this.options.templates,h=g.icon.resolve(c.call(this,{iconCss:f.iconColumns})),i=a(g.actionDropDown.resolve(c.call(this,{content:h}))),j=e(f.dropDownItemCheckbox);a.each(this.columns,function(b,h){var k=a(g.actionDropDownCheckboxItem.resolve(c.call(d,{name:h.id,label:h.text,checked:h.visible}))).on("click"+w,j,function(b){b.stopPropagation(),h.visible=a(this).find("input").prop("checked"),t.call(d),s.call(d)});i.find(e(f.dropDownMenuItems)).append(k)}),b.append(i)}function n(){if(0!==this.options.navigation){var b=e(this.options.css.infos),d=this.header.find(b),f=this.footer.find(b);if(d.length+f.length>0){var g=this.current*this.rowCount,h=a(this.options.templates.infos.resolve(c.call(this,{end:0===this.total||-1===g||g>this.total?this.total:g,start:0===this.total?0:g-this.rowCount+1,total:this.total})));u.call(this,d,h,1),u.call(this,f,h,2)}}}function o(){var a=this.element.children("tbody").first(),b=this.options.templates;a.html(b.noResults.resolve(c.call(this,{columns:this.columns.where(h).length})))}function p(){if(0!==this.options.navigation){var b=e(this.options.css.pagination),d=this.header.find(b)._bgShowAria(-1!==this.rowCount),f=this.footer.find(b)._bgShowAria(-1!==this.rowCount);if(-1!==this.rowCount&&d.length+f.length>0){var g=this.options.templates,h=this.current,i=this.totalPages,j=a(g.pagination.resolve(c.call(this))),k=i-h,l=-1*(this.options.padding-h),m=k>=this.options.padding?Math.max(l,1):Math.max(l-this.options.padding+k,1),n=2*this.options.padding+1,o=i>=n?n:i;q.call(this,j,"first","&laquo;","first")._bgEnableAria(h>1),q.call(this,j,"prev","&lt;","prev")._bgEnableAria(h>1);for(var p=0;o>p;p++){var r=p+m;q.call(this,j,r,r,"page-"+r)._bgEnableAria()._bgSelectAria(r===h)}0===o&&q.call(this,j,1,1,"page-1")._bgEnableAria(!1)._bgSelectAria(),q.call(this,j,"next","&gt;","next")._bgEnableAria(i>h),q.call(this,j,"last","&raquo;","last")._bgEnableAria(i>h),u.call(this,d,j,1),u.call(this,f,j,2)}}}function q(b,d,f,g){var h=this,i=this.options.templates,k=this.options.css,l=c.call(this,{css:g,text:f,uri:"#"+d}),m=a(i.paginationItem.resolve(l)).addClass(k).on("click"+w,e(k.paginationButton),function(b){b.stopPropagation();var c=a(this),d=c.parent();if(!d.hasClass("active")&&!d.hasClass("disabled")){var e={first:1,prev:h.current-1,next:h.current+1,last:h.totalPages},f=c.attr("href").substr(1);h.current=e[f]||+f,j.call(h)}c.trigger("blur")});return b.append(m),m}function r(b){function d(a){return-1===a?f.options.labels.all:a}var f=this,g=this.options.rowCount;if(a.isArray(g)){var h=this.options.css,i=this.options.templates,k=a(i.actionDropDown.resolve(c.call(this,{content:this.rowCount}))),l=e(h.dropDownMenu),m=e(h.dropDownMenuText),n=e(h.dropDownMenuItems),o=e(h.dropDownItemButton);a.each(g,function(b,e){var g=a(i.actionDropDownItem.resolve(c.call(f,{text:d(e),uri:"#"+e})))._bgSelectAria(e===f.rowCount).on("click"+w,o,function(b){b.preventDefault();var c=a(this),e=+c.attr("href").substr(1);e!==f.rowCount&&(f.current=1,f.rowCount=e,c.parents(n).children().each(function(){var b=a(this),c=+b.find(o).attr("href").substr(1);b._bgSelectAria(c===e)}),c.parents(l).find(m).text(d(e)),j.call(f))});k.find(n).append(g)}),b.append(k)}}function s(){if(this.rows.length>0){var b=this,d=this.options.templates,e=this.element.children("tbody").first(),f="",g="";a.each(this.rows,function(e,h){g="",a.each(b.columns,function(e,f){if(f.visible){var i=a.isFunction(f.formatter)?f.formatter.call(b,f,h):h[f.id];g+=d.cell.resolve(c.call(b,{content:null==i||""===i?"&nbsp;":i}))}}),f+=d.row.resolve(c.call(b,{cells:g}))}),e.html(f)}else o.call(this)}function t(){var b=this,d=this.element.find("thead > tr"),f=this.options.css,g=this.options.templates,h="",i=this.options.sorting;a.each(this.columns,function(a,d){if(d.visible){var e=b.sort[d.id],j=i&&e&&"asc"===e?f.iconUp:i&&e&&"desc"===e?f.iconDown:"",k=g.icon.resolve(c.call(b,{iconCss:j}));h+=g.headerCell.resolve(c.call(b,{content:d.text,icon:k,columnId:d.id,sortable:i&&d.sortable?f.sortable:""}))}}),d.html(h),i&&d.off("click"+w).on("click"+w,e(f.sortable),function(c){c.preventDefault();var d=a(this),g=d.data("column-id")||d.parents("th").first().data("column-id"),h=b.sort[g],i=d.find(e(f.icon));b.options.multiSort||(d.parents("tr").first().find(e(f.icon)).removeClass(f.iconDown+" "+f.iconUp),b.sort={}),h&&"asc"===h?(b.sort[g]="desc",i.removeClass(f.iconUp).addClass(f.iconDown)):h&&"desc"===h?b.options.multiSort?(delete b.sort[g],i.removeClass(f.iconDown)):(b.sort[g]="asc",i.removeClass(f.iconDown).addClass(f.iconUp)):(b.sort[g]="asc",i.addClass(f.iconUp)),j.call(b)})}function u(b,c,d){this.options.navigation&d&&b.each(function(b,d){a(d).before(c.clone(!0)).remove()})}function v(){var a=this.options.templates,b=this.element.children("tbody").first(),d=b.find("tr > td").first(),e=Math.ceil((b.height()||0)-(d.height()+20));b.html(a.loading.resolve(c.call(this,{columns:this.columns.where(h).length}))),-1!==this.rowCount&&e>0&&b.find("tr > td").css("padding","20px 0 "+e+"px")}var w=".rs.jquery.bootgrid",x=function(b,c){this.element=a(b),this.options=a.extend(!0,{},x.defaults,this.element.data(),c);var d=this.options.rowCount=this.element.data().rowCount||c.rowCount||this.options.rowCount;this.columns=[],this.current=1,this.rows=[],this.rowCount=a.isArray(d)?d[0]:d,this.sort={},this.total=0,this.totalPages=0};x.defaults={navigation:3,enableAsync:!1,enableSelection:!1,multiSelect:!1,multiSort:!1,selectRows:!1,sorting:!0,padding:2,post:{},rowCount:[10,25,50,-1],url:"",css:{actions:"actions btn-group",columnHeaderAnchor:"column-header-anchor",columnHeaderText:"text",dropDownItemButton:"dropdown-item-button",dropDownItemCheckbox:"dropdown-item-checkbox",dropDownMenu:"dropdown btn-group",dropDownMenuItems:"dropdown-menu pull-right",dropDownMenuText:"dropdown-text",footer:"bootgrid-footer container-fluid",header:"bootgrid-header container-fluid",icon:"icon glyphicon",iconColumns:"glyphicon-th-list",iconDown:"glyphicon-chevron-down",iconRefresh:"glyphicon-refresh",iconUp:"glyphicon-chevron-up",infos:"infos",pagination:"pagination",paginationButton:"button",sortable:"sortable",table:"bootgrid-table table"},formatters:{},labels:{all:"All",infos:"Showing {{ctx.start}} to {{ctx.end}} of {{ctx.total}} entries",loading:"Loading...",noResults:"No results found!",refresh:"Refresh"},templates:{actionButton:'<button class="btn btn-default" type="button" title="{{ctx.text}}">{{tpl.icon}}</button>',actionDropDown:'<div class="{{css.dropDownMenu}}"><button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"><span class="{{css.dropDownMenuText}}">{{ctx.content}}</span> <span class="caret"></span></button><ul class="{{css.dropDownMenuItems}}" role="menu"></ul></div>',actionDropDownItem:'<li><a href="{{ctx.uri}}" class="{{css.dropDownItemButton}}">{{ctx.text}}</a></li>',actionDropDownCheckboxItem:'<li><label class="{{css.dropDownItemCheckbox}}"><input name="{{ctx.name}}" type="checkbox" value="1" {{ctx.checked}} /> {{ctx.label}}</label></li>',actions:'<div class="{{css.actions}}"></div>',body:"<tbody></tbody>",cell:"<td>{{ctx.content}}</td>",footer:'<div id="{{ctx.id}}" class="{{css.footer}}"><div class="row"><div class="col-sm-6"><p class="{{css.pagination}}"></p></div><div class="col-sm-6 infoBar"><p class="{{css.infos}}"></p></div></div></div>',header:'<div id="{{ctx.id}}" class="{{css.header}}"><div class="row"><div class="col-sm-12 actionBar"><p class="{{css.actions}}"></p></div></div></div>',headerCell:'<th data-column-id="{{ctx.columnId}}"><a href="javascript:void(0);" class="{{css.columnHeaderAnchor}} {{ctx.sortable}}"><span class="{{css.columnHeaderText}}">{{ctx.content}}</span>{{ctx.icon}}</a></th>',icon:'<span class="{{css.icon}} {{ctx.iconCss}}"></span>',infos:'<div class="{{css.infos}}">{{lbl.infos}}</div>',loading:'<tr><td colspan="{{ctx.columns}}" class="loading">{{lbl.loading}}</td></tr>',noResults:'<tr><td colspan="{{ctx.columns}}" class="no-results">{{lbl.noResults}}</td></tr>',pagination:'<ul class="{{css.pagination}}"></ul>',paginationItem:'<li class="{{ctx.css}}"><a href="{{ctx.uri}}" class="{{css.paginationButton}}">{{ctx.text}}</a></li>',row:"<tr>{{ctx.cells}}</tr>"}},x.prototype.add=function(b){a.isPlainObject(b)||a.isArray(b)},x.prototype.clear=function(){},x.prototype.destroy=function(){a(b).off(w),this.element.off(w).removeData(w)},x.prototype.insert=function(b,c){a.isPlainObject(c)||a.isArray(c)},x.prototype.reload=function(){this.current=1,j.call(this)},x.prototype.remove=function(b){"string"==typeof b||a.isArray(b)},x.prototype.select=function(){},x.prototype.sort=function(b){var c=b?a.extend({},b):{};return c===this.context.sort?this:(this.context.sort=c,a.each(c,function(){}),this)};var y=a.fn.bootgrid;if(a.fn.bootgrid=function(b){return this.each(function(){var c=a(this),d=c.data(w),e="object"==typeof b&&b;if(d||"destroy"!==b)return d||(c.data(w,d=new x(this,e)),g.call(d)),"string"==typeof b?d[b]():void 0})},a.fn.bootgrid.Constructor=x,a.fn.bootgrid.noConflict=function(){return a.fn.bootgrid=y,this},a.fn.extend({_bgAria:function(a,b){return this.attr("aria-"+a,b)},_bgRemoveAria:function(a){return this.removeAttr("aria-"+a)},_bgEnableAria:function(a){return null==a||a?this.removeClass("disabled")._bgAria("disabled","false"):this.addClass("disabled")._bgAria("disabled","true")},_bgShowAria:function(a){return null==a||a?this.show()._bgAria("hidden","false"):this.hide()._bgAria("hidden","true")},_bgSelectAria:function(a){return null==a||a?this.addClass("active")._bgAria("selected","true"):this.removeClass("active")._bgAria("selected","false")},_bgId:function(a){return a?this.attr("id",a):this.attr("id")}}),!String.prototype.resolve){var z={checked:function(a){return"boolean"==typeof a?a?'checked="checked"':"":a}};String.prototype.resolve=function(b,c){var d=this;return a.each(b,function(b,e){if("object"==typeof e){var f=c?a.extend([],c):[];f.push(b),d=d.resolve(e,f)}else{a.isFunction(z[b])&&(e=z[b](e)),b=c?c.join(".")+"."+b:b;var g=new RegExp("\\{\\{"+b+"\\}\\}","gm");d=d.replace(g,e)}}),d}}Array.prototype.where||(Array.prototype.where=function(a){for(var b=[],c=0;c<this.length;c++){var d=this[c];a(d)&&b.push(d)}return b})}(jQuery,window);