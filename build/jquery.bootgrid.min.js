/*! 
 * jQuery Bootgrid v0.9.6-beta2 - 05/19/2014
 * Copyright (c) 2014 Rafael Staib (http://www.jquery-bootgrid.com)
 * Licensed under MIT http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";function c(a){return a._bgId()+"-footer"}function d(a){return a._bgId()+"-header"}function e(b,c){var d={current:c.current,rowCount:b.rowCount,sort:c.sort},e=b.post;return e=a.isFunction(e)?e():e,a.extend(!0,d,e)}function f(b){var c=b.url;return a.isFunction(c)?c():c}function g(c){c.loading.fadeOut(300),a(b).off(q)}function h(b){var c=b.options;b.loading=a(c.templates.loading.resolve({css:c.css.loading,text:c.labels.loading})).insertAfter(b.element),i(b),k(b),j(b)}function i(b){var c=b.element,d=b.options,e=b.state,f=c.find("thead > tr").first(),g=!1;f.children().each(function(){var b=a(this),c=b.data("custom"),f=b.data("order"),h=b.data("sortable"),i={id:b.data("column-id"),custom:c===!0||1===c,order:g||"asc"!==f&&"desc"!==f?null:f,sortable:!(h===!1||0===h)};e.columns.push(i),null!=i.order&&(e.sort[i.id]=i.order),d.multiSort||null===i.order||(g=!0)})}function j(b){var c=b.element,d=b.options,h=b.state,i=e(d,h),j=f(d);if(null==j||"string"!=typeof j||0===j.length)throw new Error("Url setting must be a none empty string or a function that returns one.");c.trigger("load"+q),p(b),a.post(j,i,function(e){"string"==typeof e&&(e=a.parseJSON(e)),h.current=e.current,h.total=e.total,h.totalPages=Math.round(h.total/h.rowCount),l(c,d,h,e.rows),m(b),g(b),c.trigger("loaded"+q)}).fail(function(){g(b)})}function k(b){var e=b.element,f=b.options,g=f.css,h=f.templates,i=a(h.div.resolve({id:d(e),css:g.header})),j=a(h.div.resolve({id:c(e),css:g.footer}));e.addClass(g.table).before(i).after(j),o(b)}function l(b,c,d,e){var f=c.labels,g=c.templates,h=b.children("tbody").first().empty();e.length>0?a.each(e,function(c,e){var f=a(g.row);a.each(d.columns,function(c,d){if(d.custom)b.trigger("custom"+q,{cell:a(g.cell.resolve({content:"&nbsp;"})).appendTo(f),column:d,row:e});else{var h=e[d.id];f.append(g.cell.resolve({content:null==h?"&nbsp;":h}))}}),h.append(f)}):h.append(g.noResults.resolve({columns:d.columns.length,text:f.noResults}))}function m(b){var e=b.element,f=b.options,g=b.state,h=f.css,i=f.templates,j=g.current,k=g.totalPages,l=a(i.list.resolve({css:h.pagination})),m=k-j,o=-1*(f.padding-j),p=m>=f.padding?Math.max(o,1):Math.max(o-f.padding+m,1),q=2*f.padding+1,r=k>=q?q:k;n(b,l,"first","&laquo;","first")._bgEnableAria(j>1),n(b,l,"prev","&lt;","prev")._bgEnableAria(j>1);for(var s=0;r>s;s++){var t=s+p;n(b,l,t,t,"page-"+t)._bgEnableAria()._bgSelectAria(t===j)}n(b,l,"next","&gt;","next")._bgEnableAria(k>j),n(b,l,"last","&raquo;","last")._bgEnableAria(k>j),a("#"+c(e)).empty().append(l),f.topPagination&&a("#"+d(e)).empty().append(l.clone(!0))}function n(b,c,d,e,f){var g=b.options,h=b.state,i=g.templates,k=a(i.anchor.resolve({href:"#"+d,text:e})).on("click"+q,function(c){c.preventDefault();var d=a(this);if(!d.parent().hasClass("disabled")){var e={first:1,prev:h.current-1,next:h.current+1,last:h.totalPages},f=d.attr("href").substr(1);h.current=e[f]||+f,j(b)}}),l=a(i.listItem).addClass(f).append(k);return c.append(l),l}function o(b){var c=b.element,d=b.options,e=b.state,f=c.find("thead > tr > th"),g=d.css,h=d.templates;a.each(e.columns,function(c,i){if(i.sortable){var k=e.sort[i.id],l=g.icon+(k&&"asc"===k?" "+g.iconDown:k&&"desc"===k?" "+g.iconUp:"");f.eq(c).addClass(g.sortable).append(" "+h.icon.resolve({css:l})).on("click"+q,function(c){c.preventDefault();var h=a(this),k=e.sort[i.id],l=h.find("."+g.icon);d.multiSort||(f.find("."+g.icon).removeClass(g.iconDown+" "+g.iconUp),e.sort={}),k&&"asc"===k?(e.sort[i.id]="desc",l.removeClass(g.iconDown).addClass(g.iconUp)):k&&"desc"===k?(delete e.sort[i.id],l.removeClass(g.iconUp)):(e.sort[i.id]="asc",l.addClass(g.iconDown)),j(b)})}})}function p(c){a(b).on("resize"+q,function(){var a=c.element,b=a.position();c.loading.css("left",b.left).css("top",b.top).height(a.height()).width(a.width())}).resize(),c.loading.fadeIn(300)}var q=".rs.jquery.bootgrid",r=function(b,c){this.element=a(b),this.options=a.extend(!0,{},r.defaults,this.element.data(),c),this.state={columns:[],current:1,rowCount:this.options.rowCount,sort:{},total:0,totalPages:0},h(this)};r.defaults={post:{},padding:2,rowCount:10,url:"",topPagination:!1,multiSort:!1,css:{footer:"bootgrid-footer",icon:"glyphicon",iconDown:"glyphicon-chevron-down",iconUp:"glyphicon-chevron-up",loading:"bootgrid-loading",pagination:"pagination",header:"bootgrid-header",sortable:"sortable",table:"bootgrid-table table"},labels:{loading:"Loading...",noResults:"No results found!"},templates:{anchor:'<a href="{{href}}">{{text}}</a>',cell:"<td>{{content}}</td>",div:'<div id="{{id}}" class="{{css}}"></div>',icon:'<span class="{{css}}"></span>',list:'<ul class="{{css}}"></ul>',listItem:"<li></li>",loading:'<div class="{{css}}"><div>{{text}}</div></div>',noResults:'<tr><td colspan="{{columns}}" class="no-results">{{text}}</td></tr>',row:"<tr></tr>"}},r.prototype.destroy=function(){a(b).off(q),this.element.off(q).removeData(q)},r.prototype.reload=function(){this.state.current=1,j(this)},r.prototype.sort=function(b){var c=b?a.extend({},b):{};return c===this.state.sort?this:(this.state.sort=c,a.each(c,function(){}),this)};var s=a.fn.bootgrid;a.fn.bootgrid=function(b){return this.each(function(){var c=a(this),d=c.data(q),e="object"==typeof b&&b;if(d||"destroy"!==b)return d||c.data(q,d=new r(this,e)),"string"==typeof b?d[b]():void 0})},a.fn.bootgrid.Constructor=r,a.fn.bootgrid.noConflict=function(){return a.fn.bootgrid=s,this},a.fn.extend({_bgAria:function(a,b){return this.attr("aria-"+a,b)},_bgRemoveAria:function(a){return this.removeAttr("aria-"+a)},_bgEnableAria:function(a){return null==a||a?this.removeClass("disabled")._bgAria("disabled","false"):this.addClass("disabled")._bgAria("disabled","true")},_bgShowAria:function(a){return null==a||a?this.show()._bgAria("hidden","false"):this.hide()._bgAria("hidden","true")},_bgSelectAria:function(a){return null==a||a?this.addClass("active")._bgAria("selected","true"):this.removeClass("active")._bgAria("selected","false")},_bgId:function(a){return a?this.attr("id",a):this.attr("id")}}),String.prototype.resolve||(String.prototype.resolve=function(b){var c=this;return a.each(b,function(a,b){var d=new RegExp("\\{\\{"+a+"\\}\\}","gm");c=c.replace(d,b)}),c})}(jQuery,window);