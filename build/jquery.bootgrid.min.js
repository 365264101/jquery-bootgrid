/*! 
 * jQuery Bootgrid v1.0.0-beta - 07/24/2014
 * Copyright (c) 2014 Rafael Staib (http://www.jquery-bootgrid.com)
 * Licensed under MIT http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";function c(b){var c={tpl:this.options.templates,lbl:this.options.labels,css:this.options.css,ctx:{}};return a.extend({},c,{ctx:b||{}})}function d(){var b={current:this.current,rowCount:this.rowCount,sort:this.sort},c=this.options.post;return c=a.isFunction(c)?c():c,a.extend(!0,b,c)}function e(b){return"."+a.trim(b).replace(/\s+/gm,".")}function f(){var b=this.options.url;return a.isFunction(b)?b():b}function g(){this.element.trigger("initialize"+y),i.call(this),k.call(this),l.call(this),u.call(this),m.call(this),j.call(this),this.element.trigger("initialized"+y)}function h(a){return a.visible}function i(){var b=this,c=this.element.find("thead > tr").first(),d=!1;c.children().each(function(){var c=a(this),e=c.data(),f={id:e.columnId,type:b.options.converters[e.type]&&e.type||"string",text:c.text(),formatter:b.options.formatters[e.formatter],order:d||"asc"!==e.order&&"desc"!==e.order?null:e.order,sortable:!(e.sortable===!1||0===e.sortable),visible:!(e.visible===!1||0===e.visible)};b.columns.push(f),null!=f.order&&(b.sort[f.id]=f.order),b.options.multiSort||null===f.order||(d=!0)})}function j(){function b(){c.totalPages=Math.ceil(c.total/c.rowCount),t.call(c),o.call(c),q.call(c),c.element.trigger("loaded"+y)}var c=this,e=d.call(this),g=f.call(this);if(null==g||"string"!=typeof g||0===g.length)throw new Error("Url setting must be a none empty string or a function that returns one.");this.element.trigger("load"+y),w.call(this),this.options.ajax?a.post(g,e,function(d){"string"==typeof d&&(d=a.parseJSON(d)),c.rows=d.rows,c.current=d.current,c.total=d.total,b()}).fail(function(){p.call(c),c.element.trigger("loaded"+y)}):b()}function k(){if(!this.options.ajax){var b=this,c=this.element.find("tbody > tr");c.each(function(){var c=a(this),d=c.children("td"),e={};a.each(b.columns,function(a,c){e[c.id]=b.options.converters[c.type].from(d.eq(a).text())}),b.rows.push(e)}),this.total=this.rows.length,this.totalPages=-1===this.rowCount?1:Math.ceil(this.total/this.rowCount),x.call(this)}}function l(){var b=this.options.templates;this.element.addClass(this.options.css.table),0===this.element.children("tbody").length&&this.element.append(b.body),1&this.options.navigation&&(this.header=a(b.header.resolve(c.call(this,{id:this.element._bgId()+"-header"}))),this.element.before(this.header)),2&this.options.navigation&&(this.footer=a(b.footer.resolve(c.call(this,{id:this.element._bgId()+"-footer"}))),this.element.after(this.footer))}function m(){if(0!==this.options.navigation){var b=this.options.css,d=e(b.actions),f=this.header.find(d),g=this.footer.find(d);if(f.length+g.length>0){var h=this,i=this.options.templates,k=a(i.actions.resolve(c.call(this)));if(this.options.ajax){var l=a(i.actionButton.resolve(c.call(this,{iconCss:b.iconRefresh,text:this.options.labels.refresh}))).on("click"+y,function(a){a.stopPropagation(),h.current=1,j.call(h)});k.append(l)}s.call(this,k),n.call(this,k),v.call(this,f,k,1),v.call(this,g,k,2)}}}function n(b){var d=this,f=this.options.css,g=this.options.templates,h=g.icon.resolve(c.call(this,{iconCss:f.iconColumns})),i=a(g.actionDropDown.resolve(c.call(this,{content:h}))),k=e(f.dropDownItemCheckbox);a.each(this.columns,function(b,h){var l=a(g.actionDropDownCheckboxItem.resolve(c.call(d,{name:h.id,label:h.text,checked:h.visible}))).on("click"+y,k,function(b){b.stopPropagation(),h.visible=a(this).find("input").prop("checked"),d.element.find("tbody").empty(),u.call(d),j.call(d)});i.find(e(f.dropDownMenuItems)).append(l)}),b.append(i)}function o(){if(0!==this.options.navigation){var b=e(this.options.css.infos),d=this.header.find(b),f=this.footer.find(b);if(d.length+f.length>0){var g=this.current*this.rowCount,h=a(this.options.templates.infos.resolve(c.call(this,{end:0===this.total||-1===g||g>this.total?this.total:g,start:0===this.total?0:g-this.rowCount+1,total:this.total})));v.call(this,d,h,1),v.call(this,f,h,2)}}}function p(){var a=this.element.children("tbody").first(),b=this.options.templates;a.html(b.noResults.resolve(c.call(this,{columns:this.columns.where(h).length})))}function q(){if(0!==this.options.navigation){var b=e(this.options.css.pagination),d=this.header.find(b)._bgShowAria(-1!==this.rowCount),f=this.footer.find(b)._bgShowAria(-1!==this.rowCount);if(-1!==this.rowCount&&d.length+f.length>0){var g=this.options.templates,h=this.current,i=this.totalPages,j=a(g.pagination.resolve(c.call(this))),k=i-h,l=-1*(this.options.padding-h),m=k>=this.options.padding?Math.max(l,1):Math.max(l-this.options.padding+k,1),n=2*this.options.padding+1,o=i>=n?n:i;r.call(this,j,"first","&laquo;","first")._bgEnableAria(h>1),r.call(this,j,"prev","&lt;","prev")._bgEnableAria(h>1);for(var p=0;o>p;p++){var q=p+m;r.call(this,j,q,q,"page-"+q)._bgEnableAria()._bgSelectAria(q===h)}0===o&&r.call(this,j,1,1,"page-1")._bgEnableAria(!1)._bgSelectAria(),r.call(this,j,"next","&gt;","next")._bgEnableAria(i>h),r.call(this,j,"last","&raquo;","last")._bgEnableAria(i>h),v.call(this,d,j,1),v.call(this,f,j,2)}}}function r(b,d,f,g){var h=this,i=this.options.templates,k=this.options.css,l=c.call(this,{css:g,text:f,uri:"#"+d}),m=a(i.paginationItem.resolve(l)).addClass(k).on("click"+y,e(k.paginationButton),function(b){b.stopPropagation();var c=a(this),d=c.parent();if(!d.hasClass("active")&&!d.hasClass("disabled")){var e={first:1,prev:h.current-1,next:h.current+1,last:h.totalPages},f=c.attr("href").substr(1);h.current=e[f]||+f,j.call(h)}c.trigger("blur")});return b.append(m),m}function s(b){function d(a){return-1===a?f.options.labels.all:a}var f=this,g=this.options.rowCount;if(a.isArray(g)){var h=this.options.css,i=this.options.templates,k=a(i.actionDropDown.resolve(c.call(this,{content:this.rowCount}))),l=e(h.dropDownMenu),m=e(h.dropDownMenuText),n=e(h.dropDownMenuItems),o=e(h.dropDownItemButton);a.each(g,function(b,e){var g=a(i.actionDropDownItem.resolve(c.call(f,{text:d(e),uri:"#"+e})))._bgSelectAria(e===f.rowCount).on("click"+y,o,function(b){b.preventDefault();var c=a(this),e=+c.attr("href").substr(1);e!==f.rowCount&&(f.current=1,f.rowCount=e,c.parents(n).children().each(function(){var b=a(this),c=+b.find(o).attr("href").substr(1);b._bgSelectAria(c===e)}),c.parents(l).find(m).text(d(e)),j.call(f))});k.find(n).append(g)}),b.append(k)}}function t(){var b=this.options.ajax||-1===this.rowCount?this.rows:this.rows.page(this.current,this.rowCount);if(b.length>0){var d=this,e=this.options.templates,f=this.element.children("tbody").first(),g="",h="";a.each(b,function(b,f){h="",a.each(d.columns,function(b,g){if(g.visible){var i=a.isFunction(g.formatter)?g.formatter.call(d,g,f):d.options.converters[g.type].to(f[g.id]);h+=e.cell.resolve(c.call(d,{content:null==i||""===i?"&nbsp;":i}))}}),g+=e.row.resolve(c.call(d,{cells:h}))}),f.html(g)}else p.call(this)}function u(){var b=this,d=this.element.find("thead > tr"),f=this.options.css,g=this.options.templates,h="",i=this.options.sorting;a.each(this.columns,function(a,d){if(d.visible){var e=b.sort[d.id],j=i&&e&&"asc"===e?f.iconUp:i&&e&&"desc"===e?f.iconDown:"",k=g.icon.resolve(c.call(b,{iconCss:j}));h+=g.headerCell.resolve(c.call(b,{content:d.text,icon:k,columnId:d.id,sortable:i&&d.sortable?f.sortable:""}))}}),d.html(h),i&&d.off("click"+y).on("click"+y,e(f.sortable),function(c){c.preventDefault();var d=a(this),g=d.data("column-id")||d.parents("th").first().data("column-id"),h=b.sort[g],i=d.find(e(f.icon));b.options.multiSort||(d.parents("tr").first().find(e(f.icon)).removeClass(f.iconDown+" "+f.iconUp),b.sort={}),h&&"asc"===h?(b.sort[g]="desc",i.removeClass(f.iconUp).addClass(f.iconDown)):h&&"desc"===h?b.options.multiSort?(delete b.sort[g],i.removeClass(f.iconDown)):(b.sort[g]="asc",i.removeClass(f.iconDown).addClass(f.iconUp)):(b.sort[g]="asc",i.addClass(f.iconUp)),x.call(b),j.call(b)})}function v(b,c,d){this.options.navigation&d&&b.each(function(b,d){a(d).before(c.clone(!0)).remove()})}function w(){var a=this.options.templates,b=this.element.children("thead").first(),d=this.element.children("tbody").first(),e=d.find("tr > td").first(),f=this.element.height()-b.height()-(e.height()+20);d.html(a.loading.resolve(c.call(this,{columns:this.columns.where(h).length}))),-1!==this.rowCount&&f>0&&d.find("tr > td").css("padding","20px 0 "+f+"px")}function x(){function a(c,d,e){function f(a){return"asc"===h.order?a:-1*a}e=e||0;var g=e+1,h=b[e];return c[h.id]>d[h.id]?f(1):c[h.id]<d[h.id]?f(-1):b.length>g?a(g):0}var b=[];if(!this.options.ajax){for(var c in this.sort)(this.options.multiSort||0===b.length)&&b.push({id:c,order:this.sort[c]});b.length>0&&this.rows.sort(a)}}var y=".rs.jquery.bootgrid",z=function(b,c){this.element=a(b),this.options=a.extend(!0,{},z.defaults,this.element.data(),c);var d=this.options.rowCount=this.element.data().rowCount||c.rowCount||this.options.rowCount;this.columns=[],this.current=1,this.rows=[],this.rowCount=a.isArray(d)?d[0]:d,this.sort={},this.total=0,this.totalPages=0};z.defaults={navigation:3,padding:2,rowCount:[10,25,50,-1],selection:!1,multiSelect:!1,selectRows:!1,sorting:!0,multiSort:!1,ajax:!1,post:{},url:"",converters:{numeric:{from:function(a){return+a},to:function(a){return a}},string:{from:function(a){return a},to:function(a){return a}}},css:{actions:"actions btn-group",columnHeaderAnchor:"column-header-anchor",columnHeaderText:"text",dropDownItemButton:"dropdown-item-button",dropDownItemCheckbox:"dropdown-item-checkbox",dropDownMenu:"dropdown btn-group",dropDownMenuItems:"dropdown-menu pull-right",dropDownMenuText:"dropdown-text",footer:"bootgrid-footer container-fluid",header:"bootgrid-header container-fluid",icon:"icon glyphicon",iconColumns:"glyphicon-th-list",iconDown:"glyphicon-chevron-down",iconRefresh:"glyphicon-refresh",iconUp:"glyphicon-chevron-up",infos:"infos",pagination:"pagination",paginationButton:"button",sortable:"sortable",table:"bootgrid-table table"},formatters:{},labels:{all:"All",infos:"Showing {{ctx.start}} to {{ctx.end}} of {{ctx.total}} entries",loading:"Loading...",noResults:"No results found!",refresh:"Refresh"},templates:{actionButton:'<button class="btn btn-default" type="button" title="{{ctx.text}}">{{tpl.icon}}</button>',actionDropDown:'<div class="{{css.dropDownMenu}}"><button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"><span class="{{css.dropDownMenuText}}">{{ctx.content}}</span> <span class="caret"></span></button><ul class="{{css.dropDownMenuItems}}" role="menu"></ul></div>',actionDropDownItem:'<li><a href="{{ctx.uri}}" class="{{css.dropDownItemButton}}">{{ctx.text}}</a></li>',actionDropDownCheckboxItem:'<li><label class="{{css.dropDownItemCheckbox}}"><input name="{{ctx.name}}" type="checkbox" value="1" {{ctx.checked}} /> {{ctx.label}}</label></li>',actions:'<div class="{{css.actions}}"></div>',body:"<tbody></tbody>",cell:"<td>{{ctx.content}}</td>",footer:'<div id="{{ctx.id}}" class="{{css.footer}}"><div class="row"><div class="col-sm-6"><p class="{{css.pagination}}"></p></div><div class="col-sm-6 infoBar"><p class="{{css.infos}}"></p></div></div></div>',header:'<div id="{{ctx.id}}" class="{{css.header}}"><div class="row"><div class="col-sm-12 actionBar"><p class="{{css.actions}}"></p></div></div></div>',headerCell:'<th data-column-id="{{ctx.columnId}}"><a href="javascript:void(0);" class="{{css.columnHeaderAnchor}} {{ctx.sortable}}"><span class="{{css.columnHeaderText}}">{{ctx.content}}</span>{{ctx.icon}}</a></th>',icon:'<span class="{{css.icon}} {{ctx.iconCss}}"></span>',infos:'<div class="{{css.infos}}">{{lbl.infos}}</div>',loading:'<tr><td colspan="{{ctx.columns}}" class="loading">{{lbl.loading}}</td></tr>',noResults:'<tr><td colspan="{{ctx.columns}}" class="no-results">{{lbl.noResults}}</td></tr>',pagination:'<ul class="{{css.pagination}}"></ul>',paginationItem:'<li class="{{ctx.css}}"><a href="{{ctx.uri}}" class="{{css.paginationButton}}">{{ctx.text}}</a></li>',row:"<tr>{{ctx.cells}}</tr>"}},z.prototype.append=function(a){if(!this.options.ajax){for(var b=0;b<a.length;b++)this.rows.splice(this.rows.length-1,0,a[b]);this.total=this.rows.length,x.call(this),j.call(this)}return this},z.prototype.clear=function(){return this.options.ajax||(this.rows=[],this.current=1,this.total=0,j.call(this)),this},z.prototype.destroy=function(){return a(b).off(y),this.element.off(y).removeData(y),this},z.prototype.reload=function(){return this.current=1,j.call(this),this},z.prototype.remove=function(){return!this.options.ajax,this},z.prototype.search=function(){return this},z.prototype.select=function(){return this},z.prototype.sort=function(b){var c=b?a.extend({},b):{};return c===this.sort?this:(this.sort=c,u.call(this),x.call(this),j.call(this),this)};var A=a.fn.bootgrid;if(a.fn.bootgrid=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),e=d.data(y),f="object"==typeof b&&b;if(e||"destroy"!==b)return e||(d.data(y,e=new z(this,f)),g.call(e)),"string"==typeof b?e[b].apply(e,c):void 0})},a.fn.bootgrid.Constructor=z,a.fn.bootgrid.noConflict=function(){return a.fn.bootgrid=A,this},a.fn.extend({_bgAria:function(a,b){return this.attr("aria-"+a,b)},_bgRemoveAria:function(a){return this.removeAttr("aria-"+a)},_bgEnableAria:function(a){return null==a||a?this.removeClass("disabled")._bgAria("disabled","false"):this.addClass("disabled")._bgAria("disabled","true")},_bgShowAria:function(a){return null==a||a?this.show()._bgAria("hidden","false"):this.hide()._bgAria("hidden","true")},_bgSelectAria:function(a){return null==a||a?this.addClass("active")._bgAria("selected","true"):this.removeClass("active")._bgAria("selected","false")},_bgId:function(a){return a?this.attr("id",a):this.attr("id")}}),!String.prototype.resolve){var B={checked:function(a){return"boolean"==typeof a?a?'checked="checked"':"":a}};String.prototype.resolve=function(b,c){var d=this;return a.each(b,function(b,e){if("object"==typeof e){var f=c?a.extend([],c):[];f.push(b),d=d.resolve(e,f)}else{a.isFunction(B[b])&&(e=B[b](e)),b=c?c.join(".")+"."+b:b;var g=new RegExp("\\{\\{"+b+"\\}\\}","gm");d=d.replace(g,e)}}),d}}Array.prototype.page||(Array.prototype.page=function(a,b){var c=(a-1)*b,d=c+b;return this.length>c?this.length>d?this.slice(c,d):this.slice(c):[]}),Array.prototype.where||(Array.prototype.where=function(a){for(var b=[],c=0;c<this.length;c++){var d=this[c];a(d)&&b.push(d)}return b})}(jQuery,window);