/*! 
 * jQuery Bootgrid v0.9.6-rc1 - 05/28/2014
 * Copyright (c) 2014 Rafael Staib (http://www.jquery-bootgrid.com)
 * Licensed under MIT http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";function c(a){if("object"==typeof a)for(var b in a)return a[b];throw new Error("Is not a dictionary!")}function d(a){return a.data(v)}function e(b,c){return a.extend({},b.cachedParams,{ctx:c||{}})}function f(b,c){var d={current:c.current,rowCount:b.rowCount,sort:c.sort},e=b.post;return e=a.isFunction(e)?e():e,a.extend(!0,d,e)}function g(b){return"."+a.trim(b).replace(/\s+/gm,".")}function h(b){var c=b.url;return a.isFunction(c)?c():c}function i(c){var e=d(c);e.loading.fadeOut(300),a(b).off(v)}function j(a,b,c){k(a,b,c),m(a,b,c),l(a,b,c)}function k(b,c,d){var e=b.find("thead > tr").first(),f=!1;e.children().each(function(){var b=a(this),e=b.data("custom"),g=b.data("order"),h=b.data("sortable"),i={id:b.data("column-id"),custom:e===!0||1===e,order:f||"asc"!==g&&"desc"!==g?null:g,sortable:!(h===!1||0===h)};d.columns.push(i),null!=i.order&&(d.sort[i.id]=i.order),c.multiSort||null===i.order||(f=!0)})}function l(b,c,d){var e=f(c,d),g=h(c);if(null==g||"string"!=typeof g||0===g.length)throw new Error("Url setting must be a none empty string or a function that returns one.");b.trigger("load"+v),u(b),a.post(g,e,function(e){"string"==typeof e&&(e=a.parseJSON(e)),d.current=e.current,d.total=e.total,d.totalPages=Math.ceil(d.total/d.rowCount),o(b,c,d,e.rows),p(b,c,d),q(b,c,d),i(b),b.trigger("loaded"+v)}).fail(function(){i(b)})}function m(b,c,f){var g=d(b),h=c.css,i=c.templates;g.loading=a(c.templates.loading.resolve(e(f))),g.header=a(i.header.resolve(e(f,{id:b._bgId()+"-header"}))),g.footer=a(i.footer.resolve(e(f,{id:b._bgId()+"-footer"}))),b.addClass(h.table).before(g.header).after(g.footer).after(g.loading),n(b,c,f),s(b,c,f)}function n(b,c,f){if(0!==c.navigation){var h=d(b),i=c.css,j=c.templates,k=a(j.actionButton.resolve(e(f,{iconCss:i.iconRefresh,text:c.labels.refresh}))).one("click"+v,function(d){d.preventDefault();var e=a(this);f.current=1,l(b,c,f),e.trigger("blur")}),m=a(j.actions.resolve(e(f))).append(k),n=g(i.actions);t(c,h.header.find(n),m,1),t(c,h.footer.find(n),m,2)}}function o(b,c,d,f){var g=c.templates,h=b.children("tbody").first().empty();f.length>0?a.each(f,function(c,f){var i=a(g.row);a.each(d.columns,function(c,h){if(h.custom)b.trigger("custom"+v,{cell:a(g.cell.resolve(e(d,{content:"&nbsp;"}))).appendTo(i),column:h,row:f});else{var j=f[h.id];i.append(g.cell.resolve(e(d,{content:null==j||""===j?"&nbsp;":j})))}}),h.append(i)}):h.append(g.noResults.resolve(e(d,{columns:d.columns.length,text:c.labels.noResults})))}function p(b,c,f){if(0!==c.navigation){var h=d(b),i=f.current*f.rowCount,j=a(c.templates.infos.resolve(e(f,{end:i,start:i-f.rowCount+1,total:f.total}))),k=g(c.css.infos);t(c,h.header.find(k),j,1),t(c,h.footer.find(k),j,2)}}function q(b,c,f){if(0!==c.navigation){var h=d(b),i=c.templates,j=f.current,k=f.totalPages,l=a(i.pagination.resolve(e(f))),m=k-j,n=-1*(c.padding-j),o=m>=c.padding?Math.max(n,1):Math.max(n-c.padding+m,1),p=2*c.padding+1,q=k>=p?p:k,s=g(c.css.pagination);r(b,c,f,l,"first","&laquo;","first")._bgEnableAria(j>1),r(b,c,f,l,"prev","&lt;","prev")._bgEnableAria(j>1);for(var u=0;q>u;u++){var v=u+o;r(b,c,f,l,v,v,"page-"+v)._bgEnableAria()._bgSelectAria(v===j)}r(b,c,f,l,"next","&gt;","next")._bgEnableAria(k>j),r(b,c,f,l,"last","&raquo;","last")._bgEnableAria(k>j),t(c,h.header.find(s),l,1),t(c,h.footer.find(s),l,2)}}function r(b,c,d,f,h,i,j){var k=c.templates,m=c.css,n=e(d,{css:j,text:i,uri:"#"+h}),o=a(k.paginationItem.resolve(n)).addClass(m);return o.find(g(m.paginationButton)).on("click"+v,function(e){e.preventDefault();var f=a(this),g=f.parent();if(!g.hasClass("active")&&!g.hasClass("disabled")){var h={first:1,prev:d.current-1,next:d.current+1,last:d.totalPages},i=f.attr("href").substr(1);d.current=h[i]||+i,l(b,c,d)}f.trigger("blur")}),f.append(o),o}function s(b,c,d){var f=b.find("thead > tr > th"),g=c.css,h=c.templates;a.each(d.columns,function(i,j){if(j.sortable){var k=d.sort[j.id],m=k&&"asc"===k?" "+g.iconDown:k&&"desc"===k?" "+g.iconUp:"";f.eq(i).addClass(g.sortable).append(" "+h.icon.resolve(e(d,{iconCss:m}))).on("click"+v,function(e){e.preventDefault();var h=a(this),i=d.sort[j.id],k=h.find("."+g.icon);c.multiSort||(f.find("."+g.icon).removeClass(g.iconDown+" "+g.iconUp),d.sort={}),i&&"asc"===i?(d.sort[j.id]="desc",k.removeClass(g.iconDown).addClass(g.iconUp)):i&&"desc"===i?c.multiSort?(delete d.sort[j.id],k.removeClass(g.iconUp)):(d.sort[j.id]="asc",k.removeClass(g.iconUp).addClass(g.iconDown)):(d.sort[j.id]="asc",k.addClass(g.iconDown)),l(b,c,d)})}})}function t(b,c,d,e){b.navigation&e&&c.each(function(b,c){a(c).before(d.clone(!0)).remove()})}function u(c){var e=d(c);a(b).on("resize"+v,function(){var a=c.position();e.loading.css("left",a.left).css("top",a.top).height(c.height()).width(c.width())}).resize(),e.loading.fadeIn(300)}var v=".rs.jquery.bootgrid",w=function(b,d){this.element=a(b),this.options=a.extend(!0,{},w.defaults,this.element.data(),d);var e=this.options.rowCount;this.context={columns:[],current:1,rowCount:"object"==typeof e?c(e):e,sort:{},total:0,totalPages:0,cachedParams:{tpl:this.options.templates,lbl:this.options.labels,css:this.options.css,ctx:{}}}};w.defaults={navigation:3,multiSort:!1,padding:2,post:{},rowCount:{10:10,25:25,50:50,All:-1},url:"",css:{actions:"actions btn-group",dropDown:"btn dropdown-toggle",footer:"bootgrid-footer container-fluid",icon:"glyphicon",iconDown:"glyphicon-chevron-down",iconRefresh:"glyphicon-refresh",iconUp:"glyphicon-chevron-up",infos:"infos",loading:"bootgrid-loading",pagination:"pagination",paginationButton:"button",header:"bootgrid-header container-fluid",sortable:"sortable",table:"bootgrid-table table"},labels:{infos:"Showing {{ctx.start}} to {{ctx.end}} of {{ctx.total}} entries",loading:"Loading...",noResults:"No results found!",refresh:"Refresh"},templates:{actionButton:'<button class="btn" type="button" title="{{ctx.text}}">{{tpl.icon}}</button>',actionDropDown:'<button class="btn dropdown-toggle" type="button" data-toggle="dropdown">{{ctx.text}} <span class="caret"></span></button><ul class="dropdown-menu" role="menu"></ul>',actions:'<div class="{{css.actions}}"></div>',cell:"<td>{{ctx.content}}</td>",header:'<div id="{{ctx.id}}" class="{{css.header}}"><div class="row"><div class="col-sm-12 actionBar"><p class="{{css.actions}}"></p></div></div></div>',footer:'<div id="{{ctx.id}}" class="{{css.footer}}"><div class="row"><div class="col-sm-6"><p class="{{css.pagination}}"></p></div><div class="col-sm-6 infoBar"><p class="{{css.infos}}"></p></div></div></div>',icon:'<span class="{{css.icon}} {{ctx.iconCss}}"></span>',infos:'<div class="{{css.infos}}">{{lbl.infos}}</div>',loading:'<div class="{{css.loading}}"><div>{{lbl.loading}}</div></div>',noResults:'<tr><td colspan="{{ctx.columns}}" class="no-results">{{ctx.text}}</td></tr>',pagination:'<ul class="{{css.pagination}}"></ul>',paginationItem:'<li class="{{ctx.css}}"><a href="{{ctx.uri}}" class="{{css.paginationButton}}">{{ctx.text}}</a></li>',row:"<tr></tr>"}},w.prototype.destroy=function(){a(b).off(v),this.element.off(v).removeData(v)},w.prototype.reload=function(){this.context.current=1,l(this.element,this.options,this.context)},w.prototype.sort=function(b){var c=b?a.extend({},b):{};return c===this.context.sort?this:(this.context.sort=c,a.each(c,function(){}),this)};var x=a.fn.bootgrid;a.fn.bootgrid=function(b){return this.each(function(){var c=a(this),d=c.data(v),e="object"==typeof b&&b;if(d||"destroy"!==b)return d||(c.data(v,d=new w(this,e)),j(d.element,d.options,d.context)),"string"==typeof b?d[b]():void 0})},a.fn.bootgrid.Constructor=w,a.fn.bootgrid.noConflict=function(){return a.fn.bootgrid=x,this},a.fn.extend({_bgAria:function(a,b){return this.attr("aria-"+a,b)},_bgRemoveAria:function(a){return this.removeAttr("aria-"+a)},_bgEnableAria:function(a){return null==a||a?this.removeClass("disabled")._bgAria("disabled","false"):this.addClass("disabled")._bgAria("disabled","true")},_bgShowAria:function(a){return null==a||a?this.show()._bgAria("hidden","false"):this.hide()._bgAria("hidden","true")},_bgSelectAria:function(a){return null==a||a?this.addClass("active")._bgAria("selected","true"):this.removeClass("active")._bgAria("selected","false")},_bgId:function(a){return a?this.attr("id",a):this.attr("id")}}),String.prototype.resolve||(String.prototype.resolve=function(b,c){var d=this;return a.each(b,function(b,e){if("object"==typeof e){var f=c?a.extend([],c):[];f.push(b),d=d.resolve(e,f)}else{b=c?c.join(".")+"."+b:b;var g=new RegExp("\\{\\{"+b+"\\}\\}","gm");d=d.replace(g,e)}}),d})}(jQuery,window);