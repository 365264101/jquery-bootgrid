/*! 
 * jQuery Bootgrid v0.9.1-alpha - 05/08/2014
 * Copyright (c) 2014 Rafael Staib (http://www.jquery-bootgrid.com)
 * Licensed under MIT http://www.opensource.org/licenses/MIT
 */
!function(a){"use strict";function b(a){return a._bgId()+"-footer"}function c(a){return a._bgId()+"-header"}function d(b,c){var d={current:c.current,rowCount:b.rowCount,sort:c.sort},e=b.post;return e=a.isFunction(e)?e():e,a.extend(!0,d,e)}function e(b){var c=b.url;return a.isFunction(c)?c():c}function f(a,b,c){g(a,b,c),i(a,b,c),h(a,b,c)}function g(b,c,d){var e=b.find("thead > tr").first(),f=!1;e.children().each(function(){var b=a(this),e=b.data("order"),g=b.data("sortable"),h={id:b.data("column-id"),order:f||"asc"!==e&&"desc"!==e?null:e,sortable:!(g===!1||0===g)};d.columns.push(h),null!=h.order&&(d.sort[h.id]=h.order),c.multiSort||null===h.order||(f=!0)})}function h(b,c,f){var g=d(c,f),h=e(c);if(null==h||"string"!=typeof h||0===h.length)throw new Error("Url setting must be a none empty string or a function that returns one.");c.events.loading(),a.post(h,g,function(a){f.current=a.current,f.total=a.total,f.totalPages=Math.round(f.total/f.rowCount),j(b,c,f,a.rows),k(b,c,f),c.events.loaded()})}function i(d,e,f){var g=e.css,h=e.templates,i=a(h.div.format(c(d),g.header)),j=a(h.div.format(b(d),g.footer));d.addClass(g.table).before(i).after(j),m(d,e,f)}function j(b,c,d,e){var f=c.labels,g=c.templates,h=b.children("tbody").first().empty();e.length>0?a.each(e,function(b,c){var e=a(g.row);a.each(d.columns,function(a,b){e.append(g.cell.format(c[b.id]))}),h.append(e)}):h.append(g.noResults.format(d.columns.length,f.noResults))}function k(d,e,f){var g=e.css,h=e.templates,i=f.current,j=f.totalPages,k=a(h.list.format(g.pagination)),m=j-i,n=-1*(e.padding-i),o=m>=e.padding?Math.max(n,1):Math.max(n-e.padding+m,1),p=2*e.padding+1,q=j>=p?p:j;l(d,e,f,k,"first","&laquo;","first")._bgEnableAria(i>1),l(d,e,f,k,"prev","&lt;","prev")._bgEnableAria(i>1);for(var r=0;q>r;r++){var s=r+o;l(d,e,f,k,s,s,"page-"+s)._bgEnableAria()._bgSelectAria(s===i)}l(d,e,f,k,"next","&gt;","next")._bgEnableAria(j>i),l(d,e,f,k,"last","&raquo;","last")._bgEnableAria(j>i),a("#"+b(d)).empty().append(k),e.topPagination&&a("#"+c(d)).empty().append(k.clone(!0))}function l(b,c,d,e,f,g,i){var j=c.templates,k=a(j.anchor.format("#"+f,g)).on("click."+n,function(e){e.preventDefault();var f=a(this);if(!f.parent().hasClass("disabled")){var g={first:1,prev:d.current-1,next:d.current+1,last:d.totalPages},i=f.attr("href").substr(1);d.current=g[i]||+i,h(b,c,d)}}),l=a(j.listItem).addClass(i).append(k);return e.append(l),l}function m(b,c,d){var e=b.find("thead > tr > th"),f=c.css,g=c.templates;a.each(d.columns,function(i,j){if(j.sortable){var k=d.sort[j.id],l=f.icon+(k&&"asc"===k?" "+f.iconDown:k&&"desc"===k?" "+f.iconUp:"");e.eq(i).addClass(f.sortable).append(" "+g.icon.format(l)).on("click."+n,function(g){g.preventDefault();var i=a(this),k=d.sort[j.id],l=i.find("."+f.icon);c.multiSort||(e.find("."+f.icon).removeClass(f.iconDown+" "+f.iconUp),d.sort={}),k&&"asc"===k?(d.sort[j.id]="desc",l.removeClass(f.iconDown).addClass(f.iconUp)):k&&"desc"===k?(delete d.sort[j.id],l.removeClass(f.iconUp)):(d.sort[j.id]="asc",l.addClass(f.iconDown)),h(b,c,d)})}})}var n="rs.jquery.bootgrid",o=function(b,c){this.element=a(b),this.options=a.extend(!0,{},o.defaults,this.element.data(),c),this.state={columns:[],current:1,rowCount:this.options.rowCount,sort:{},total:0,totalPages:0},f(this.element,this.options,this.state)};o.defaults={post:{},padding:2,rowCount:10,url:"",topPagination:!1,multiSort:!1,css:{footer:"bootgrid-footer",icon:"glyphicon",iconDown:"glyphicon-chevron-down",iconUp:"glyphicon-chevron-up",pagination:"pagination",header:"bootgrid-header",sortable:"sortable",table:"bootgrid-table table"},events:{loaded:function(){},loading:function(){}},labels:{loading:"Loading...",noResults:"No results found!"},templates:{anchor:'<a href="{0}">{1}</a>',cell:"<td>{0}</td>",div:'<div id="{0}" class="{1}"></div>',icon:'<span class="{0}"></span>',list:'<ul class="{0}"></ul>',listItem:"<li></li>",noResults:'<tr><td colspan="{0}" class="no-results">{1}</td></tr>',row:"<tr>{0}</tr>"}},o.prototype.destroy=function(){this.element.off(n).removeData(n)},o.prototype.reload=function(){this.state.current=1,h(this.element,this.options,this.state)},o.prototype.sort=function(b){var c=b?a.extend({},b):{};return c===this.state.sort?this:(this.state.sort=c,a.each(c,function(){}),this)};var p=a.fn.bootgrid;a.fn.bootgrid=function(b){return this.each(function(){var c=a(this),d=c.data(n),e="object"==typeof b&&b;if(d||"destroy"!==b)return d||c.data(n,d=new o(this,e)),"string"==typeof b?d[b]():void 0})},a.fn.bootgrid.Constructor=o,a.fn.bootgrid.noConflict=function(){return a.fn.bootgrid=p,this},a.fn.extend({_bgAria:function(a,b){return this.attr("aria-"+a,b)},_bgRemoveAria:function(a){return this.removeAttr("aria-"+a)},_bgEnableAria:function(a){return null==a||a?this.removeClass("disabled")._bgAria("disabled","false"):this.addClass("disabled")._bgAria("disabled","true")},_bgShowAria:function(a){return null==a||a?this.show()._bgAria("hidden","false"):this.hide()._bgAria("hidden","true")},_bgSelectAria:function(a){return null==a||a?this.addClass("active")._bgAria("selected","true"):this.removeClass("active")._bgAria("selected","false")},_bgId:function(a){return a?this.attr("id",a):this.attr("id")}}),String.prototype.format||(String.prototype.format=function(){for(var a=this,b=0;b<arguments.length;b++){var c=new RegExp("\\{"+b+"\\}","gm");a=a.replace(c,arguments[b])}return a})}(jQuery);