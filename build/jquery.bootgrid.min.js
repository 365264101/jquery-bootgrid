/*! 
 * jQuery Bootgrid v1.0.0-alpha - 07/21/2014
 * Copyright (c) 2014 Rafael Staib (http://www.jquery-bootgrid.com)
 * Licensed under MIT http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";function c(a,b){if("object"==typeof a)for(var c in a){if(null==b)return{key:c,value:a[c]};if(b===a[c])return{key:c,value:a[c]}}throw new Error("Is not a dictionary!")}function d(b){var c={tpl:this.options.templates,lbl:this.options.labels,css:this.options.css,ctx:{}};return a.extend({},c,{ctx:b||{}})}function e(){var b={current:this.current,rowCount:this.rowCount,sort:this.sort},c=this.options.post;return c=a.isFunction(c)?c():c,a.extend(!0,b,c)}function f(b){return"."+a.trim(b).replace(/\s+/gm,".")}function g(){var b=this.options.url;return a.isFunction(b)?b():b}function h(){i.call(this),k.call(this),j.call(this)}function i(){var b=this,c=this.element.find("thead > tr").first(),d=!1;c.children().each(function(){var c=a(this),e=c.data("order"),f=c.data("sortable"),g={id:c.data("column-id"),formatter:b.options.formatters[c.data("formatter")],order:d||"asc"!==e&&"desc"!==e?null:e,sortable:!(f===!1||0===f)};b.columns.push(g),null!=g.order&&(b.sort[g.id]=g.order),b.options.multiSort||null===g.order||(d=!0)})}function j(){var b=this,c=e.call(this),d=g.call(this);if(null==d||"string"!=typeof d||0===d.length)throw new Error("Url setting must be a none empty string or a function that returns one.");this.element.trigger("load"+v),u.call(this),a.post(d,c,function(c){"string"==typeof c&&(c=a.parseJSON(c)),b.current=c.current,b.total=c.total,b.totalPages=Math.ceil(b.total/b.rowCount),m.call(b,c.rows),l.call(b),n.call(b),p.call(b),b.element.trigger("loaded"+v)}).fail(function(){o.call(b)})}function k(){var b=this.options.templates;this.element.addClass(this.options.css.table),1&this.options.navigation&&(this.header=a(b.header.resolve(d.call(this,{id:this.element._bgId()+"-header"}))),this.element.before(this.header)),2&this.options.navigation&&(this.footer=a(b.footer.resolve(d.call(this,{id:this.element._bgId()+"-footer"}))),this.element.after(this.footer)),r.call(this)}function l(){if(0!==this.options.navigation){var b=this,e=this.options.css,g=this.options.templates,h=a(g.actionButton.resolve(d.call(this,{iconCss:e.iconRefresh,text:this.options.labels.refresh}))).on("click"+v,function(c){c.preventDefault();var d=a(this);b.current=1,j.call(b),d.trigger("blur")}),i=a(g.actions.resolve(d.call(this))).append(h),k=f(e.actions);if("object"==typeof this.options.rowCount){var l=c(this.options.rowCount,this.rowCount).key,m=a(g.actionDropDown.resolve(d.call(this,{text:l})));a.each(this.options.rowCount,function(c,h){var i=a(g.actionDropDownItem.resolve(d.call(b,{buttonCss:e.dropDownItemButton,key:c,uri:"#"+h})))._bgSelectAria(c===l);i.find(f(e.dropDownItemButton)).on("click"+v,function(c){c.preventDefault();var d=a(this);d.text()!==l&&(b.current=1,b.rowCount=+d.attr("href").substr(1),j.call(b)),d.trigger("blur")}),m.find(f(e.dropDownMenu)).append(i)}),i.append(m)}t.call(this,this.header.find(k),i,1),t.call(this,this.footer.find(k),i,2)}}function m(b){if(b.length>0){var c=this,e=this.options.templates,f=this.element.children("tbody").first(),g="";a.each(b,function(b,f){g+="<tr>",a.each(c.columns,function(b,h){var i=a.isFunction(h.formatter)?h.formatter.call(c,h,f):f[h.id];g+=e.cell.resolve(d.call(c,{content:null==i||""===i?"&nbsp;":i}))}),g+="</tr>"}),f.html(g)}else o.call(this)}function n(){if(0!==this.options.navigation){var b=this.current*this.rowCount,c=a(this.options.templates.infos.resolve(d.call(this,{end:0===this.total||-1===b||b>this.total?this.total:b,start:0===this.total?0:b-this.rowCount+1,total:this.total}))),e=f(this.options.css.infos);t.call(this,this.header.find(e),c,1),t.call(this,this.footer.find(e),c,2)}}function o(){var a=this.element.children("tbody").first(),b=this.options.templates;a.html(b.noResults.resolve(d.call(this,{columns:this.columns.length})))}function p(){if(0!==this.options.navigation){var b=f(this.options.css.pagination),c=this.header.find(b)._bgShowAria(-1!==this.rowCount),e=this.footer.find(b)._bgShowAria(-1!==this.rowCount);if(-1!==this.rowCount){var g=this.options.templates,h=this.current,i=this.totalPages,j=a(g.pagination.resolve(d.call(this))),k=i-h,l=-1*(this.options.padding-h),m=k>=this.options.padding?Math.max(l,1):Math.max(l-this.options.padding+k,1),n=2*this.options.padding+1,o=i>=n?n:i;q.call(this,j,"first","&laquo;","first")._bgEnableAria(h>1),q.call(this,j,"prev","&lt;","prev")._bgEnableAria(h>1);for(var p=0;o>p;p++){var r=p+m;q.call(this,j,r,r,"page-"+r)._bgEnableAria()._bgSelectAria(r===h)}0===o&&q.call(this,j,1,1,"page-1")._bgEnableAria(!1)._bgSelectAria(),q.call(this,j,"next","&gt;","next")._bgEnableAria(i>h),q.call(this,j,"last","&raquo;","last")._bgEnableAria(i>h),t.call(this,c,j,1),t.call(this,e,j,2)}}}function q(b,c,e,g){var h=this,i=this.options.templates,k=this.options.css,l=d.call(this,{css:g,text:e,uri:"#"+c}),m=a(i.paginationItem.resolve(l)).addClass(k);return m.find(f(k.paginationButton)).on("click"+v,function(b){b.preventDefault();var c=a(this),d=c.parent();if(!d.hasClass("active")&&!d.hasClass("disabled")){var e={first:1,prev:h.current-1,next:h.current+1,last:h.totalPages},f=c.attr("href").substr(1);h.current=e[f]||+f,j.call(h)}c.trigger("blur")}),b.append(m),m}function r(){var b=this,c=this.element.find("thead > tr > th"),e=this.options.css,g=this.options.templates;a.each(this.columns,function(h,i){var k=c.eq(h);if(i.sortable){var l=b.sort[i.id],m=l&&"asc"===l?e.iconUp:l&&"desc"===l?e.iconDown:"",n=s.call(b,k,g.icon.resolve(d.call(b,{iconCss:m})),!0);n.on("click"+v,function(d){d.preventDefault();var g=a(this),h=b.sort[i.id],k=g.find(f(e.icon));b.options.multiSort||(c.find(f(e.icon)).removeClass(e.iconDown+" "+e.iconUp),b.sort={}),h&&"asc"===h?(b.sort[i.id]="desc",k.removeClass(e.iconUp).addClass(e.iconDown)):h&&"desc"===h?b.options.multiSort?(delete b.sort[i.id],k.removeClass(e.iconDown)):(b.sort[i.id]="asc",k.removeClass(e.iconDown).addClass(e.iconUp)):(b.sort[i.id]="asc",k.addClass(e.iconUp)),j.call(b)})}else s.call(b,k,"",!1)})}function s(a,b,c){var e=this.options.css,g=this.options.templates;return a.html(g.headerCellContent.resolve(d.call(this,{content:a.html(),icon:b,sortable:c?e.sortable:""}))).children(f(e.columnHeaderAnchor)).first()}function t(b,c,d){this.options.navigation&d&&b.each(function(b,d){a(d).before(c.clone(!0)).remove()})}function u(){var a=this.options.templates,b=this.element.children("tbody").first(),c=b.find("tr > td").first(),e=Math.floor(((b.height()||0)-c.height())/2);b.html(a.loading.resolve(d.call(this,{columns:this.columns.length}))),e>0&&b.find("tr > td").css("padding",e+"px 0")}var v=".rs.jquery.bootgrid",w=function(b,d){this.element=a(b),this.options=a.extend(!0,{},w.defaults,this.element.data(),d),this.columns=[],this.current=1,this.items=null;var e=this.options.rowCount;this.rowCount="object"==typeof e?c(e).value:e,this.sort={},this.total=0,this.totalPages=0};w.defaults={navigation:3,enableAsync:!1,enableSelection:!1,enableSorting:!1,multiSelect:!1,multiSort:!1,selectRows:!1,padding:2,post:{},rowCount:{10:10,25:25,50:50,All:-1},url:"",css:{actions:"actions btn-group",columnHeaderAnchor:"column-header-anchor",columnHeaderText:"text",dropDownItemButton:"dropdown-button",dropDownMenu:"dropdown-menu pull-right",footer:"bootgrid-footer container-fluid",header:"bootgrid-header container-fluid",icon:"icon glyphicon",iconDown:"glyphicon-chevron-down",iconRefresh:"glyphicon-refresh",iconUp:"glyphicon-chevron-up",infos:"infos",pagination:"pagination",paginationButton:"button",sortable:"sortable",table:"bootgrid-table table"},formatters:{},labels:{infos:"Showing {{ctx.start}} to {{ctx.end}} of {{ctx.total}} entries",loading:"Loading...",noResults:"No results found!",refresh:"Refresh"},templates:{actionButton:'<button class="btn btn-default" type="button" title="{{ctx.text}}">{{tpl.icon}}</button>',actionDropDown:'<div class="btn-group"><button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">{{ctx.text}} <span class="caret"></span></button><ul class="{{css.dropDownMenu}}" role="menu"></ul></div>',actionDropDownItem:'<li><a href="{{ctx.uri}}" class="{{ctx.buttonCss}}">{{ctx.key}}</a></li>',actions:'<div class="{{css.actions}}"></div>',cell:"<td>{{ctx.content}}</td>",footer:'<div id="{{ctx.id}}" class="{{css.footer}}"><div class="row"><div class="col-sm-6"><p class="{{css.pagination}}"></p></div><div class="col-sm-6 infoBar"><p class="{{css.infos}}"></p></div></div></div>',header:'<div id="{{ctx.id}}" class="{{css.header}}"><div class="row"><div class="col-sm-12 actionBar"><p class="{{css.actions}}"></p></div></div></div>',headerCellContent:'<a href="javascript:void(0);" class="{{css.columnHeaderAnchor}} {{ctx.sortable}}"><span class="{{css.columnHeaderText}}">{{ctx.content}}</span>{{ctx.icon}}</a>',icon:'<span class="{{css.icon}} {{ctx.iconCss}}"></span>',infos:'<div class="{{css.infos}}">{{lbl.infos}}</div>',loading:'<tr><td colspan="{{ctx.columns}}" class="loading">{{lbl.loading}}</td></tr>',noResults:'<tr><td colspan="{{ctx.columns}}" class="no-results">{{lbl.noResults}}</td></tr>',pagination:'<ul class="{{css.pagination}}"></ul>',paginationItem:'<li class="{{ctx.css}}"><a href="{{ctx.uri}}" class="{{css.paginationButton}}">{{ctx.text}}</a></li>'}},w.prototype.add=function(b){a.isPlainObject(b)||a.isArray(b)},w.prototype.clear=function(){},w.prototype.destroy=function(){a(b).off(v),this.element.off(v).removeData(v)},w.prototype.insert=function(b,c){a.isPlainObject(c)||a.isArray(c)},w.prototype.reload=function(){this.current=1,j.call(this)},w.prototype.select=function(){},w.prototype.sort=function(b){var c=b?a.extend({},b):{};return c===this.context.sort?this:(this.context.sort=c,a.each(c,function(){}),this)};var x=a.fn.bootgrid;a.fn.bootgrid=function(b){return this.each(function(){var c=a(this),d=c.data(v),e="object"==typeof b&&b;if(d||"destroy"!==b)return d||(c.data(v,d=new w(this,e)),h.call(d)),"string"==typeof b?d[b]():void 0})},a.fn.bootgrid.Constructor=w,a.fn.bootgrid.noConflict=function(){return a.fn.bootgrid=x,this},a.fn.extend({_bgAria:function(a,b){return this.attr("aria-"+a,b)},_bgRemoveAria:function(a){return this.removeAttr("aria-"+a)},_bgEnableAria:function(a){return null==a||a?this.removeClass("disabled")._bgAria("disabled","false"):this.addClass("disabled")._bgAria("disabled","true")},_bgShowAria:function(a){return null==a||a?this.show()._bgAria("hidden","false"):this.hide()._bgAria("hidden","true")},_bgSelectAria:function(a){return null==a||a?this.addClass("active")._bgAria("selected","true"):this.removeClass("active")._bgAria("selected","false")},_bgId:function(a){return a?this.attr("id",a):this.attr("id")}}),String.prototype.resolve||(String.prototype.resolve=function(b,c){var d=this;return a.each(b,function(b,e){if("object"==typeof e){var f=c?a.extend([],c):[];f.push(b),d=d.resolve(e,f)}else{b=c?c.join(".")+"."+b:b;var g=new RegExp("\\{\\{"+b+"\\}\\}","gm");d=d.replace(g,e)}}),d})}(jQuery,window);