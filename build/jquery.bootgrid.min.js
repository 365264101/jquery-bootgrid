/*! 
 * jQuery Bootgrid v1.0.0-alpha - 07/21/2014
 * Copyright (c) 2014 Rafael Staib (http://www.jquery-bootgrid.com)
 * Licensed under MIT http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";function c(a,b){if("object"==typeof a)for(var c in a){if(null==b)return{key:c,value:a[c]};if(b===a[c])return{key:c,value:a[c]}}throw new Error("Is not a dictionary!")}function d(b){var c={tpl:this.options.templates,lbl:this.options.labels,css:this.options.css,ctx:{}};return a.extend({},c,{ctx:b||{}})}function e(){var b={current:this.current,rowCount:this.rowCount,sort:this.sort},c=this.options.post;return c=a.isFunction(c)?c():c,a.extend(!0,b,c)}function f(b){return"."+a.trim(b).replace(/\s+/gm,".")}function g(){var b=this.options.url;return a.isFunction(b)?b():b}function h(){i.call(this),k.call(this),j.call(this)}function i(){var b=this,c=this.element.find("thead > tr").first(),d=!1;c.children().each(function(){var c=a(this),e=c.data("order"),f=c.data("sortable"),g=c.data("visible"),h={id:c.data("column-id"),name:c.text(),formatter:b.options.formatters[c.data("formatter")],order:d||"asc"!==e&&"desc"!==e?null:e,sortable:!(f===!1||0===f),visible:!(g===!1||0===g)};b.columns.push(h),null!=h.order&&(b.sort[h.id]=h.order),b.options.multiSort||null===h.order||(d=!0)})}function j(){var b=this,c=e.call(this),d=g.call(this);if(null==d||"string"!=typeof d||0===d.length)throw new Error("Url setting must be a none empty string or a function that returns one.");this.element.trigger("load"+x),w.call(this),a.post(d,c,function(c){"string"==typeof c&&(c=a.parseJSON(c)),b.current=c.current,b.total=c.total,b.totalPages=Math.ceil(b.total/b.rowCount),s.call(b,c.rows),l.call(b),n.call(b),p.call(b),b.element.trigger("loaded"+x)}).fail(function(){o.call(b)})}function k(){var b=this.options.templates;this.element.addClass(this.options.css.table),0===this.element.children("tbody").length&&this.element.append(b.body),1&this.options.navigation&&(this.header=a(b.header.resolve(d.call(this,{id:this.element._bgId()+"-header"}))),this.element.before(this.header)),2&this.options.navigation&&(this.footer=a(b.footer.resolve(d.call(this,{id:this.element._bgId()+"-footer"}))),this.element.after(this.footer)),t.call(this)}function l(){if(0!==this.options.navigation){var b=this.options.css,c=f(b.actions),e=this.header.find(c),g=this.footer.find(c);if(e.length+g.length>0){var h=this,i=this.options.templates,k=a(i.actionButton.resolve(d.call(this,{iconCss:b.iconRefresh,text:this.options.labels.refresh}))).on("click"+x,function(b){b.preventDefault();var c=a(this);h.current=1,j.call(h),c.trigger("blur")}),l=a(i.actions.resolve(d.call(this))).append(k);r.call(this,l),m.call(this,l),v.call(this,e,l,1),v.call(this,g,l,2)}}}function m(b){var c=this,e=this.options.css,g=this.options.templates,h=g.icon.resolve(d.call(this,{iconCss:e.iconColumns})),i=a(g.actionDropDown.resolve(d.call(this,{content:h})));a.each(this.columns,function(b,h){var k=a(g.actionDropDownCheckboxItem.resolve(d.call(c,{value:h.id,label:h.name,checked:h.visible}))).find(f(e.dropDownItemCheckbox)).on("click"+x,function(b){b.preventDefault();var d=a(this);h.visible=!d.children("input[type=checkbox]").prop("checked"),j.call(c),d.trigger("blur")}).end();i.find(f(e.dropDownMenu)).append(k)}),b.append(i)}function n(){if(0!==this.options.navigation){var b=f(this.options.css.infos),c=this.header.find(b),e=this.footer.find(b);if(c.length+e.length>0){var g=this.current*this.rowCount,h=a(this.options.templates.infos.resolve(d.call(this,{end:0===this.total||-1===g||g>this.total?this.total:g,start:0===this.total?0:g-this.rowCount+1,total:this.total})));v.call(this,c,h,1),v.call(this,e,h,2)}}}function o(){var a=this.element.children("tbody").first(),b=this.options.templates;a.html(b.noResults.resolve(d.call(this,{columns:this.columns.length})))}function p(){if(0!==this.options.navigation){var b=f(this.options.css.pagination),c=this.header.find(b)._bgShowAria(-1!==this.rowCount),e=this.footer.find(b)._bgShowAria(-1!==this.rowCount);if(-1!==this.rowCount&&c.length+e.length>0){var g=this.options.templates,h=this.current,i=this.totalPages,j=a(g.pagination.resolve(d.call(this))),k=i-h,l=-1*(this.options.padding-h),m=k>=this.options.padding?Math.max(l,1):Math.max(l-this.options.padding+k,1),n=2*this.options.padding+1,o=i>=n?n:i;q.call(this,j,"first","&laquo;","first")._bgEnableAria(h>1),q.call(this,j,"prev","&lt;","prev")._bgEnableAria(h>1);for(var p=0;o>p;p++){var r=p+m;q.call(this,j,r,r,"page-"+r)._bgEnableAria()._bgSelectAria(r===h)}0===o&&q.call(this,j,1,1,"page-1")._bgEnableAria(!1)._bgSelectAria(),q.call(this,j,"next","&gt;","next")._bgEnableAria(i>h),q.call(this,j,"last","&raquo;","last")._bgEnableAria(i>h),v.call(this,c,j,1),v.call(this,e,j,2)}}}function q(b,c,e,g){var h=this,i=this.options.templates,k=this.options.css,l=d.call(this,{css:g,text:e,uri:"#"+c}),m=a(i.paginationItem.resolve(l)).addClass(k);return m.find(f(k.paginationButton)).on("click"+x,function(b){b.preventDefault();var c=a(this),d=c.parent();if(!d.hasClass("active")&&!d.hasClass("disabled")){var e={first:1,prev:h.current-1,next:h.current+1,last:h.totalPages},f=c.attr("href").substr(1);h.current=e[f]||+f,j.call(h)}c.trigger("blur")}),b.append(m),m}function r(b){if("object"==typeof this.options.rowCount){var e=this,g=this.options.css,h=this.options.templates,i=c(this.options.rowCount,this.rowCount).key,k=a(h.actionDropDown.resolve(d.call(this,{content:i})));a.each(this.options.rowCount,function(b,c){var l=a(h.actionDropDownItem.resolve(d.call(e,{key:b,uri:"#"+c})))._bgSelectAria(b===i).find(f(g.dropDownItemButton)).on("click"+x,function(b){b.preventDefault();var c=a(this);c.text()!==i&&(e.current=1,e.rowCount=+c.attr("href").substr(1),j.call(e)),c.trigger("blur")}).end();k.find(f(g.dropDownMenu)).append(l)}),b.append(k)}}function s(b){if(b.length>0){var c=this,e=this.options.templates,f=this.element.children("tbody").first(),g="",h="";a.each(b,function(b,f){h="",a.each(c.columns,function(b,g){var i=a.isFunction(g.formatter)?g.formatter.call(c,g,f):f[g.id];h+=e.cell.resolve(d.call(c,{content:null==i||""===i?"&nbsp;":i}))}),g+=e.row.resolve(d.call(c,{cells:h}))}),f.html(g)}else o.call(this)}function t(){var b=this,c=this.element.find("thead > tr > th"),e=this.options.css,g=this.options.templates;a.each(this.columns,function(h,i){var k=c.eq(h);if(i.sortable){var l=b.sort[i.id],m=l&&"asc"===l?e.iconUp:l&&"desc"===l?e.iconDown:"",n=u.call(b,k,g.icon.resolve(d.call(b,{iconCss:m})),!0);n.on("click"+x,function(d){d.preventDefault();var g=a(this),h=b.sort[i.id],k=g.find(f(e.icon));b.options.multiSort||(c.find(f(e.icon)).removeClass(e.iconDown+" "+e.iconUp),b.sort={}),h&&"asc"===h?(b.sort[i.id]="desc",k.removeClass(e.iconUp).addClass(e.iconDown)):h&&"desc"===h?b.options.multiSort?(delete b.sort[i.id],k.removeClass(e.iconDown)):(b.sort[i.id]="asc",k.removeClass(e.iconDown).addClass(e.iconUp)):(b.sort[i.id]="asc",k.addClass(e.iconUp)),j.call(b)})}else u.call(b,k,"",!1)})}function u(a,b,c){var e=this.options.css,g=this.options.templates;return a.html(g.headerCellContent.resolve(d.call(this,{content:a.html(),icon:b,sortable:c?e.sortable:""}))).children(f(e.columnHeaderAnchor)).first()}function v(b,c,d){this.options.navigation&d&&b.each(function(b,d){a(d).before(c.clone(!0)).remove()})}function w(){var a=this.options.templates,b=this.element.children("tbody").first(),c=b.find("tr > td").first(),e=Math.floor(((b.height()||0)-c.height())/2);b.html(a.loading.resolve(d.call(this,{columns:this.columns.length}))),e>0&&b.find("tr > td").css("padding",e+"px 0")}var x=".rs.jquery.bootgrid",y=function(b,d){this.element=a(b),this.options=a.extend(!0,{},y.defaults,this.element.data(),d),this.columns=[],this.current=1,this.items=null;var e=this.options.rowCount;this.rowCount="object"==typeof e?c(e).value:e,this.sort={},this.total=0,this.totalPages=0};y.defaults={navigation:3,enableAsync:!1,enableSelection:!1,enableSorting:!1,multiSelect:!1,multiSort:!1,selectRows:!1,padding:2,post:{},rowCount:{10:10,25:25,50:50,All:-1},url:"",css:{actions:"actions btn-group",columnHeaderAnchor:"column-header-anchor",columnHeaderText:"text",dropDownItemButton:"dropdown-button",dropDownItemCheckbox:"dropdown-checkbox",dropDownMenu:"dropdown-menu pull-right",footer:"bootgrid-footer container-fluid",header:"bootgrid-header container-fluid",icon:"icon glyphicon",iconColumns:"glyphicon-th-list",iconDown:"glyphicon-chevron-down",iconRefresh:"glyphicon-refresh",iconUp:"glyphicon-chevron-up",infos:"infos",pagination:"pagination",paginationButton:"button",sortable:"sortable",table:"bootgrid-table table"},formatters:{},labels:{infos:"Showing {{ctx.start}} to {{ctx.end}} of {{ctx.total}} entries",loading:"Loading...",noResults:"No results found!",refresh:"Refresh"},templates:{actionButton:'<button class="btn btn-default" type="button" title="{{ctx.text}}">{{tpl.icon}}</button>',actionDropDown:'<div class="btn-group"><button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">{{ctx.content}} <span class="caret"></span></button><ul class="{{css.dropDownMenu}}" role="menu"></ul></div>',actionDropDownItem:'<li><a href="{{ctx.uri}}" class="{{css.dropDownItemButton}}">{{ctx.key}}</a></li>',actionDropDownCheckboxItem:'<li><label class="{{css.dropDownItemCheckbox}}"><input type="checkbox" value="{{ctx.value}}" {{ctx.checked}} /> {{ctx.label}}</label></li>',actions:'<div class="{{css.actions}}"></div>',body:"<tbody></tbody>",cell:"<td>{{ctx.content}}</td>",footer:'<div id="{{ctx.id}}" class="{{css.footer}}"><div class="row"><div class="col-sm-6"><p class="{{css.pagination}}"></p></div><div class="col-sm-6 infoBar"><p class="{{css.infos}}"></p></div></div></div>',header:'<div id="{{ctx.id}}" class="{{css.header}}"><div class="row"><div class="col-sm-12 actionBar"><p class="{{css.actions}}"></p></div></div></div>',headerCellContent:'<a href="javascript:void(0);" class="{{css.columnHeaderAnchor}} {{ctx.sortable}}"><span class="{{css.columnHeaderText}}">{{ctx.content}}</span>{{ctx.icon}}</a>',icon:'<span class="{{css.icon}} {{ctx.iconCss}}"></span>',infos:'<div class="{{css.infos}}">{{lbl.infos}}</div>',loading:'<tr><td colspan="{{ctx.columns}}" class="loading">{{lbl.loading}}</td></tr>',noResults:'<tr><td colspan="{{ctx.columns}}" class="no-results">{{lbl.noResults}}</td></tr>',pagination:'<ul class="{{css.pagination}}"></ul>',paginationItem:'<li class="{{ctx.css}}"><a href="{{ctx.uri}}" class="{{css.paginationButton}}">{{ctx.text}}</a></li>',row:"<tr>{{ctx.cells}}</tr>"}},y.prototype.add=function(b){a.isPlainObject(b)||a.isArray(b)},y.prototype.clear=function(){},y.prototype.destroy=function(){a(b).off(x),this.element.off(x).removeData(x)},y.prototype.insert=function(b,c){a.isPlainObject(c)||a.isArray(c)},y.prototype.reload=function(){this.current=1,j.call(this)},y.prototype.remove=function(b){"string"==typeof b||a.isArray(b)},y.prototype.select=function(){},y.prototype.sort=function(b){var c=b?a.extend({},b):{};return c===this.context.sort?this:(this.context.sort=c,a.each(c,function(){}),this)};var z=a.fn.bootgrid;if(a.fn.bootgrid=function(b){return this.each(function(){var c=a(this),d=c.data(x),e="object"==typeof b&&b;if(d||"destroy"!==b)return d||(c.data(x,d=new y(this,e)),h.call(d)),"string"==typeof b?d[b]():void 0})},a.fn.bootgrid.Constructor=y,a.fn.bootgrid.noConflict=function(){return a.fn.bootgrid=z,this},a.fn.extend({_bgAria:function(a,b){return this.attr("aria-"+a,b)},_bgRemoveAria:function(a){return this.removeAttr("aria-"+a)},_bgEnableAria:function(a){return null==a||a?this.removeClass("disabled")._bgAria("disabled","false"):this.addClass("disabled")._bgAria("disabled","true")},_bgShowAria:function(a){return null==a||a?this.show()._bgAria("hidden","false"):this.hide()._bgAria("hidden","true")},_bgSelectAria:function(a){return null==a||a?this.addClass("active")._bgAria("selected","true"):this.removeClass("active")._bgAria("selected","false")},_bgId:function(a){return a?this.attr("id",a):this.attr("id")}}),!String.prototype.resolve){var A={checked:function(a){return"boolean"==typeof a?a?'checked="checked"':"":a}};String.prototype.resolve=function(b,c){var d=this;return a.each(b,function(b,e){if("object"==typeof e){var f=c?a.extend([],c):[];f.push(b),d=d.resolve(e,f)}else{a.isFunction(A[b])&&(e=A[b](e)),b=c?c.join(".")+"."+b:b;var g=new RegExp("\\{\\{"+b+"\\}\\}","gm");d=d.replace(g,e)}}),d}}}(jQuery,window);